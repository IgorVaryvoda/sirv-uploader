{"version":3,"sources":["../src/utils/image-utils.ts","../src/utils/csv-parser.ts","../src/components/DropZone.tsx","../src/components/FileList.tsx","../src/hooks/useImageEditor.ts","../src/components/icons.tsx","../src/components/ImageEditor.tsx","../src/components/StagedFilesGrid.tsx","../src/components/SpreadsheetImport.tsx","../src/hooks/useSirvUpload.ts","../src/hooks/useDropboxChooser.ts","../src/hooks/useGoogleDrivePicker.ts","../src/hooks/useExternalImport.ts","../src/components/SirvUploader.tsx"],"names":["useState","useRef","useCallback","useEffect","jsxs","clsx","jsx","Fragment","blob","memo","CropOverlay","useMemo","FileItem","TabButton","ExternalPickerPanel"],"mappings":"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","file":"index.js","sourcesContent":["/**\n * File utility functions for the Sirv Upload Widget\n */\n\nconst HEIC_TYPES = ['image/heic', 'image/heif']\nconst IMAGE_EXTENSIONS = /\\.(jpe?g|png|gif|webp|heic|heif|bmp|tiff?|avif|svg)$/i\nconst VIDEO_EXTENSIONS = /\\.(mp4|webm|mov|avi|mkv|m4v|ogv)$/i\nconst MODEL_3D_EXTENSIONS = /\\.(glb|gltf|obj|fbx|usdz|stl)$/i\nconst PDF_EXTENSION = /\\.pdf$/i\n\nexport const ACCEPTED_IMAGE_FORMATS =\n  'image/jpeg,image/png,image/gif,image/webp,image/bmp,image/tiff,image/heic,image/heif,image/avif,image/svg+xml,.jpg,.jpeg,.png,.gif,.webp,.bmp,.tif,.tiff,.heic,.heif,.avif,.svg'\n\nexport const ACCEPTED_VIDEO_FORMATS =\n  'video/mp4,video/webm,video/quicktime,video/x-msvideo,video/x-matroska,.mp4,.webm,.mov,.avi,.mkv,.m4v,.ogv'\n\nexport const ACCEPTED_3D_FORMATS =\n  'model/gltf-binary,model/gltf+json,.glb,.gltf,.obj,.fbx,.usdz,.stl'\n\nexport const ACCEPTED_ALL_FORMATS =\n  `${ACCEPTED_IMAGE_FORMATS},${ACCEPTED_VIDEO_FORMATS},${ACCEPTED_3D_FORMATS},application/pdf,.pdf`\n\nexport const DEFAULT_MAX_FILE_SIZE = 10 * 1024 * 1024 // 10MB\n\nexport function isImageFile(file: File): boolean {\n  if (file.type.startsWith('image/') && !file.type.includes('svg')) return true\n  if (IMAGE_EXTENSIONS.test(file.name) && !file.name.toLowerCase().endsWith('.svg')) return true\n  return false\n}\n\nexport function isSvgFile(file: File): boolean {\n  return file.type === 'image/svg+xml' || file.name.toLowerCase().endsWith('.svg')\n}\n\nexport function isVideoFile(file: File): boolean {\n  if (file.type.startsWith('video/')) return true\n  if (VIDEO_EXTENSIONS.test(file.name)) return true\n  return false\n}\n\nexport function is3DModelFile(file: File): boolean {\n  const ext = file.name.toLowerCase().split('.').pop()\n  return MODEL_3D_EXTENSIONS.test(file.name) || ['glb', 'gltf', 'obj', 'fbx', 'usdz', 'stl'].includes(ext || '')\n}\n\nexport function isPdfFile(file: File): boolean {\n  return file.type === 'application/pdf' || PDF_EXTENSION.test(file.name)\n}\n\n/**\n * Check if a file can have a visual preview generated\n */\nexport function canPreviewFile(file: File): boolean {\n  return isImageFile(file) && !isSvgFile(file)\n}\n\n/**\n * Get the file category for display purposes\n */\nexport function getFileCategory(file: File): 'image' | 'video' | '3d' | 'pdf' | 'other' {\n  if (isImageFile(file) || isSvgFile(file)) return 'image'\n  if (isVideoFile(file)) return 'video'\n  if (is3DModelFile(file)) return '3d'\n  if (isPdfFile(file)) return 'pdf'\n  return 'other'\n}\n\nexport function isHeifFile(file: File): boolean {\n  if (HEIC_TYPES.includes(file.type.toLowerCase())) return true\n  if (/\\.(heic|heif)$/i.test(file.name)) return true\n  return false\n}\n\nexport async function detectHeicByMagicBytes(file: File): Promise<boolean> {\n  try {\n    const buffer = await file.slice(0, 12).arrayBuffer()\n    const view = new DataView(buffer)\n\n    if (view.byteLength < 12) return false\n\n    const ftypOffset = 4\n    const ftyp = String.fromCharCode(\n      view.getUint8(ftypOffset),\n      view.getUint8(ftypOffset + 1),\n      view.getUint8(ftypOffset + 2),\n      view.getUint8(ftypOffset + 3)\n    )\n\n    if (ftyp !== 'ftyp') return false\n\n    const brand = String.fromCharCode(\n      view.getUint8(8),\n      view.getUint8(9),\n      view.getUint8(10),\n      view.getUint8(11)\n    )\n\n    const heicBrands = ['heic', 'heix', 'hevc', 'hevx', 'mif1', 'msf1']\n    return heicBrands.includes(brand.toLowerCase())\n  } catch {\n    return false\n  }\n}\n\nexport async function convertHeicToJpeg(file: File): Promise<File> {\n  const heic2any = (await import('heic2any')).default\n  const blob = await heic2any({\n    blob: file,\n    toType: 'image/jpeg',\n    quality: 0.92,\n  })\n  const resultBlob = Array.isArray(blob) ? blob[0] : blob\n\n  if (!resultBlob || resultBlob.size === 0) {\n    throw new Error('HEIC conversion produced empty result')\n  }\n\n  const newName = file.name.replace(/\\.(heic|heif)$/i, '.jpg') || 'converted.jpg'\n  return new File([resultBlob], newName.endsWith('.jpg') ? newName : `${newName}.jpg`, {\n    type: 'image/jpeg',\n  })\n}\n\n/**\n * Convert HEIC with multiple fallback strategies:\n * 1. Client-side heic2any library\n * 2. Browser native support via canvas (Safari)\n * 3. Optional server-side endpoint\n */\nexport async function convertHeicWithFallback(\n  file: File,\n  serverEndpoint?: string\n): Promise<File> {\n  // Try 1: Client-side heic2any library\n  try {\n    return await convertHeicToJpeg(file)\n  } catch (primaryError) {\n    console.warn('Primary HEIC conversion (heic2any) failed:', primaryError)\n\n    // Try 2: Browser native support via canvas (Safari only)\n    try {\n      const img = new Image()\n      const canvas = document.createElement('canvas')\n      const ctx = canvas.getContext('2d')\n\n      if (!ctx) throw new Error('Canvas not supported')\n\n      const objectUrl = URL.createObjectURL(file)\n\n      await new Promise<void>((resolve, reject) => {\n        img.onload = () => resolve()\n        img.onerror = () => reject(new Error('Browser cannot decode HEIC natively'))\n        img.src = objectUrl\n      })\n\n      canvas.width = img.naturalWidth\n      canvas.height = img.naturalHeight\n      ctx.drawImage(img, 0, 0)\n\n      URL.revokeObjectURL(objectUrl)\n\n      const blob = await new Promise<Blob | null>((resolve) => {\n        canvas.toBlob(resolve, 'image/jpeg', 0.92)\n      })\n\n      if (!blob || blob.size === 0) {\n        throw new Error('Canvas conversion produced empty result')\n      }\n\n      const newName = file.name.replace(/\\.(heic|heif)$/i, '.jpg') || 'converted.jpg'\n      return new File([blob], newName.endsWith('.jpg') ? newName : `${newName}.jpg`, {\n        type: 'image/jpeg',\n      })\n    } catch (canvasError) {\n      console.warn('Canvas fallback failed:', canvasError)\n\n      // Try 3: Server-side conversion if endpoint provided\n      if (serverEndpoint) {\n        try {\n          const formData = new FormData()\n          formData.append('file', file)\n\n          const response = await fetch(serverEndpoint, {\n            method: 'POST',\n            body: formData,\n          })\n\n          if (!response.ok) {\n            throw new Error(`Server returned ${response.status}`)\n          }\n\n          const { dataUrl, filename } = await response.json()\n          const base64Data = dataUrl.split(',')[1]\n          const binaryString = atob(base64Data)\n          const bytes = new Uint8Array(binaryString.length)\n          for (let i = 0; i < binaryString.length; i++) {\n            bytes[i] = binaryString.charCodeAt(i)\n          }\n          const blob = new Blob([bytes], { type: 'image/jpeg' })\n\n          return new File([blob], filename, { type: 'image/jpeg' })\n        } catch (serverError) {\n          console.warn('Server-side HEIC conversion failed:', serverError)\n        }\n      }\n\n      const primaryMsg = primaryError instanceof Error ? primaryError.message : String(primaryError)\n      throw new Error(\n        `Unable to convert HEIC image (${primaryMsg}). Please export as JPEG from your Photos app.`\n      )\n    }\n  }\n}\n\nexport function generateId(): string {\n  const array = new Uint8Array(8)\n  crypto.getRandomValues(array)\n  const randomPart = Array.from(array, (b) => b.toString(16).padStart(2, '0')).join('')\n  return `${Date.now()}-${randomPart}`\n}\n\nexport function validateFileSize(\n  file: File,\n  maxSize: number = DEFAULT_MAX_FILE_SIZE\n): { valid: boolean; error?: string } {\n  if (file.size > maxSize) {\n    return {\n      valid: false,\n      error: `File too large. Maximum size is ${Math.round(maxSize / 1024 / 1024)}MB, got ${(file.size / 1024 / 1024).toFixed(1)}MB`,\n    }\n  }\n  return { valid: true }\n}\n\nexport function isValidUrl(url: string | null | undefined): url is string {\n  if (!url) return false\n  try {\n    new URL(url)\n    return true\n  } catch {\n    return false\n  }\n}\n\nexport async function getImageDimensions(\n  file: File\n): Promise<{ width: number; height: number } | null> {\n  return new Promise((resolve) => {\n    const img = new Image()\n    const url = URL.createObjectURL(file)\n\n    img.onload = () => {\n      URL.revokeObjectURL(url)\n      resolve({ width: img.naturalWidth, height: img.naturalHeight })\n    }\n\n    img.onerror = () => {\n      URL.revokeObjectURL(url)\n      resolve(null)\n    }\n\n    img.src = url\n  })\n}\n\nexport function formatFileSize(bytes: number): string {\n  if (bytes < 1024) return `${bytes} B`\n  if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`\n  return `${(bytes / 1024 / 1024).toFixed(1)} MB`\n}\n\nexport function getFileExtension(filename: string): string {\n  const match = filename.match(/\\.([^.]+)$/)\n  return match ? match[1].toLowerCase() : ''\n}\n\nexport function getMimeType(file: File): string {\n  if (file.type) return file.type\n\n  const ext = getFileExtension(file.name)\n  const mimeTypes: Record<string, string> = {\n    jpg: 'image/jpeg',\n    jpeg: 'image/jpeg',\n    png: 'image/png',\n    gif: 'image/gif',\n    webp: 'image/webp',\n    avif: 'image/avif',\n    bmp: 'image/bmp',\n    tif: 'image/tiff',\n    tiff: 'image/tiff',\n    heic: 'image/heic',\n    heif: 'image/heif',\n  }\n\n  return mimeTypes[ext] || 'application/octet-stream'\n}\n","/**\n * Client-side CSV/Excel parsing utilities\n * ExcelJS is dynamically imported to avoid bundling ~300KB in initial load\n */\n\nexport type CellValue =\n  | string\n  | number\n  | boolean\n  | Date\n  | null\n  | undefined\n  | { text: string }\n  | { result: unknown }\n\nconst DELIMITERS = [',', '\\t', ';', '|'] as const\nexport type CsvDelimiter = (typeof DELIMITERS)[number]\n\n/**\n * Detect the delimiter used in CSV content by analyzing the first few lines\n */\nexport function detectDelimiter(csvContent: string): CsvDelimiter {\n  const lines = csvContent.trim().split(/\\r?\\n/).slice(0, 5)\n  if (lines.length === 0) return ','\n\n  const delimiterCounts: Record<CsvDelimiter, number[]> = {\n    ',': [],\n    '\\t': [],\n    ';': [],\n    '|': [],\n  }\n\n  for (const line of lines) {\n    let inQuotes = false\n    const counts: Record<CsvDelimiter, number> = { ',': 0, '\\t': 0, ';': 0, '|': 0 }\n\n    for (const char of line) {\n      if (char === '\"') {\n        inQuotes = !inQuotes\n      } else if (!inQuotes) {\n        if (char in counts) {\n          counts[char as CsvDelimiter]++\n        }\n      }\n    }\n\n    for (const delim of DELIMITERS) {\n      delimiterCounts[delim].push(counts[delim])\n    }\n  }\n\n  let bestDelimiter: CsvDelimiter = ','\n  let bestScore = -1\n\n  for (const delim of DELIMITERS) {\n    const counts = delimiterCounts[delim]\n    if (counts.length === 0) continue\n\n    const nonZero = counts.filter((c) => c > 0)\n    if (nonZero.length === 0) continue\n\n    const allSame = nonZero.every((c) => c === nonZero[0])\n    const avgCount = nonZero.reduce((a, b) => a + b, 0) / nonZero.length\n    const coverage = nonZero.length / counts.length\n\n    const score = (allSame ? 100 : 0) + avgCount * coverage\n\n    if (score > bestScore && avgCount > 0) {\n      bestScore = score\n      bestDelimiter = delim\n    }\n  }\n\n  return bestDelimiter\n}\n\n/**\n * Parse a single CSV row, handling quoted fields\n */\nexport function parseCsvRow(line: string, delimiter: CsvDelimiter = ','): string[] {\n  const result: string[] = []\n  let current = ''\n  let inQuotes = false\n\n  for (let i = 0; i < line.length; i++) {\n    const char = line[i]\n    if (char === '\"') {\n      inQuotes = !inQuotes\n    } else if (char === delimiter && !inQuotes) {\n      result.push(current.trim().replace(/^\"|\"$/g, ''))\n      current = ''\n    } else {\n      current += char\n    }\n  }\n  result.push(current.trim().replace(/^\"|\"$/g, ''))\n  return result\n}\n\n/**\n * Split comma-separated URLs in a cell value\n */\nexport function splitMultipleUrls(cellValue: string): string[] {\n  if (!cellValue) return []\n  return cellValue\n    .split(',')\n    .map((url) => url.trim())\n    .filter((url) => url.length > 0 && url.startsWith('http'))\n}\n\n/**\n * Extract pathname from a URL string\n */\nexport function extractPathFromUrl(url: string): string {\n  try {\n    return new URL(url).pathname\n  } catch {\n    return url\n  }\n}\n\n/**\n * Convert ExcelJS cell value to string\n */\nexport function cellToString(cell: CellValue): string {\n  if (cell == null) return ''\n  if (typeof cell === 'object' && 'text' in cell) return cell.text\n  if (typeof cell === 'object' && 'result' in cell) return String(cell.result ?? '')\n  return String(cell)\n}\n\n/**\n * Get headers from CSV content\n */\nexport function getCsvHeaders(csvContent: string, delimiter?: CsvDelimiter): string[] {\n  const lines = csvContent.trim().split(/\\r?\\n/)\n  if (lines.length === 0) return []\n  const delim = delimiter ?? detectDelimiter(csvContent)\n  return parseCsvRow(lines[0], delim)\n}\n\n/**\n * Find column index by name (case-insensitive), falling back to \"url\"\n */\nexport function findColumnIndex(headers: string[], column?: string): number {\n  const headersLower = headers.map((h) => h.toLowerCase())\n\n  if (column) {\n    let columnIndex = headersLower.indexOf(column.toLowerCase())\n    if (columnIndex !== -1) return columnIndex\n    columnIndex = headers.indexOf(column)\n    if (columnIndex !== -1) return columnIndex\n  }\n\n  return headersLower.findIndex((h) => h === 'url')\n}\n\nexport interface ParsedUrlItem {\n  url: string\n  path: string\n  valid: boolean\n  error?: string\n}\n\n/**\n * Validate a URL - customizable validator\n */\nexport type UrlValidator = (url: string) => { valid: boolean; error?: string }\n\nexport const defaultUrlValidator: UrlValidator = (url: string) => {\n  try {\n    const parsed = new URL(url)\n    if (!['http:', 'https:'].includes(parsed.protocol)) {\n      return { valid: false, error: 'URL must use http or https protocol' }\n    }\n    return { valid: true }\n  } catch {\n    return { valid: false, error: 'Invalid URL format' }\n  }\n}\n\nexport const sirvUrlValidator: UrlValidator = (url: string) => {\n  // Match standard Sirv URL: https://{alias}.sirv.com/{path}\n  const sirvMatch = url.match(/^https?:\\/\\/([^.]+)\\.sirv\\.com(\\/[^?#]+)/)\n  if (sirvMatch) {\n    return { valid: true }\n  }\n\n  // Match URLs with image extension\n  const imageMatch = url.match(\n    /^https?:\\/\\/[^/]+(\\/[^?#]+\\.(jpe?g|png|gif|webp|avif|bmp|tiff?))$/i\n  )\n  if (imageMatch) {\n    return { valid: true }\n  }\n\n  return { valid: false, error: 'Not a valid Sirv or image URL' }\n}\n\n/**\n * Parse Excel buffer in the browser\n * ExcelJS is dynamically imported to reduce initial bundle size\n */\nexport async function parseExcelArrayBuffer(arrayBuffer: ArrayBuffer): Promise<CellValue[][]> {\n  const ExcelJS = await import('exceljs')\n  const workbook = new ExcelJS.default.Workbook()\n  await workbook.xlsx.load(arrayBuffer)\n\n  const worksheet = workbook.worksheets[0]\n  if (!worksheet) return []\n\n  const rows: CellValue[][] = []\n  worksheet.eachRow((row) => {\n    const values = row.values as CellValue[]\n    rows.push(values.slice(1)) // Remove undefined first element (1-indexed)\n  })\n\n  return rows\n}\n\n/**\n * Get headers from Excel rows\n */\nexport function getExcelHeaders(rows: CellValue[][]): string[] {\n  if (rows.length === 0) return []\n  return rows[0].map((cell, i) => cellToString(cell) || `Column ${i + 1}`)\n}\n\n/**\n * Get sample rows from Excel\n */\nexport function getExcelSampleRows(rows: CellValue[][], urlColumnIndex: number): string[][] {\n  if (rows.length < 2) return []\n\n  const sampleRows: string[][] = []\n\n  for (let i = 1; i < rows.length && sampleRows.length < 3; i++) {\n    const urlCell = cellToString(rows[i][urlColumnIndex]).trim()\n    if (urlCell && urlCell.length > 0) {\n      sampleRows.push(rows[i].map((cell) => cellToString(cell)))\n    }\n  }\n\n  if (sampleRows.length === 0) {\n    return rows.slice(1, 4).map((row) => row.map((cell) => cellToString(cell)))\n  }\n\n  return sampleRows\n}\n\n/**\n * Get sample rows from CSV\n */\nexport function getCsvSampleRows(\n  lines: string[],\n  urlColumnIndex: number,\n  delimiter: CsvDelimiter = ','\n): string[][] {\n  if (lines.length < 2) return []\n\n  const sampleRows: string[][] = []\n\n  for (let i = 1; i < lines.length && sampleRows.length < 3; i++) {\n    const row = parseCsvRow(lines[i], delimiter)\n    const urlCell = row[urlColumnIndex]?.trim()\n    if (urlCell && urlCell.length > 0) {\n      sampleRows.push(row)\n    }\n  }\n\n  if (sampleRows.length === 0) {\n    for (let i = 1; i <= Math.min(3, lines.length - 1); i++) {\n      sampleRows.push(parseCsvRow(lines[i], delimiter))\n    }\n  }\n\n  return sampleRows\n}\n\n/**\n * Estimate image count in an Excel column\n */\nexport function estimateExcelImageCount(rows: CellValue[][], columnIndex: number): number {\n  if (rows.length < 2 || columnIndex < 0) return rows.length - 1\n\n  let count = 0\n  for (let i = 1; i < rows.length; i++) {\n    const cellValue = cellToString(rows[i][columnIndex]).trim()\n    if (cellValue) {\n      count += splitMultipleUrls(cellValue).length\n    }\n  }\n  return count || rows.length - 1\n}\n\n/**\n * Estimate image count in a CSV column\n */\nexport function estimateCsvImageCount(\n  lines: string[],\n  columnIndex: number,\n  delimiter: CsvDelimiter = ','\n): number {\n  if (lines.length < 2 || columnIndex < 0) return lines.length - 1\n\n  let count = 0\n  for (let i = 1; i < lines.length; i++) {\n    const values = parseCsvRow(lines[i], delimiter)\n    const cellValue = values[columnIndex]?.trim()\n    if (cellValue) {\n      count += splitMultipleUrls(cellValue).length\n    }\n  }\n  return count || lines.length - 1\n}\n\nexport interface ClientParseResult {\n  headers: string[]\n  sampleRows: string[][]\n  rowCount: number\n  estimatedImageCounts: number[]\n  urls: ParsedUrlItem[]\n  validCount: number\n  invalidCount: number\n  totalCount: number\n}\n\nexport interface ParseOptions {\n  column?: string\n  previewOnly?: boolean\n  validator?: UrlValidator\n}\n\n/**\n * Parse CSV content client-side with preview and URL extraction\n */\nexport function parseCsvClient(\n  csvContent: string,\n  options: ParseOptions = {}\n): ClientParseResult {\n  const { validator = defaultUrlValidator } = options\n  const lines = csvContent.trim().split(/\\r?\\n/)\n  const delimiter = detectDelimiter(csvContent)\n  const headers = getCsvHeaders(csvContent, delimiter)\n  const rowCount = lines.length - 1\n  const headersLower = headers.map((h) => h.toLowerCase())\n\n  // Find likely URL column\n  let urlColumnIndex = headersLower.findIndex(\n    (h) => h === 'url' || h === 'image' || h === 'images' || h === 'image_url'\n  )\n  if (urlColumnIndex === -1) {\n    for (let col = 0; col < headers.length && urlColumnIndex === -1; col++) {\n      for (let row = 1; row < Math.min(100, lines.length); row++) {\n        const values = parseCsvRow(lines[row], delimiter)\n        const cell = values[col]?.trim()\n        if (cell && cell.startsWith('http')) {\n          urlColumnIndex = col\n          break\n        }\n      }\n    }\n  }\n  if (urlColumnIndex === -1) urlColumnIndex = 0\n\n  const sampleRows = getCsvSampleRows(lines, urlColumnIndex, delimiter)\n  const estimatedImageCounts = headers.map((_, colIndex) =>\n    estimateCsvImageCount(lines, colIndex, delimiter)\n  )\n\n  if (options.previewOnly) {\n    return {\n      headers,\n      sampleRows,\n      rowCount,\n      estimatedImageCounts,\n      urls: [],\n      validCount: 0,\n      invalidCount: 0,\n      totalCount: 0,\n    }\n  }\n\n  const columnIndex = findColumnIndex(headers, options.column)\n  if (columnIndex === -1) {\n    throw new Error('Column not found in CSV')\n  }\n\n  const urls: ParsedUrlItem[] = []\n  for (let i = 1; i < lines.length; i++) {\n    const values = parseCsvRow(lines[i], delimiter)\n    const cellValue = values[columnIndex]?.trim()\n    if (cellValue) {\n      for (const url of splitMultipleUrls(cellValue)) {\n        const validation = validator(url)\n        urls.push({\n          url,\n          path: extractPathFromUrl(url),\n          valid: validation.valid,\n          error: validation.error,\n        })\n      }\n    }\n  }\n\n  const validCount = urls.filter((u) => u.valid).length\n\n  return {\n    headers,\n    sampleRows,\n    rowCount,\n    estimatedImageCounts,\n    urls,\n    validCount,\n    invalidCount: urls.length - validCount,\n    totalCount: urls.length,\n  }\n}\n\n/**\n * Parse Excel file client-side with preview and URL extraction\n */\nexport async function parseExcelClient(\n  arrayBuffer: ArrayBuffer,\n  options: ParseOptions = {}\n): Promise<ClientParseResult> {\n  const { validator = defaultUrlValidator } = options\n  const rows = await parseExcelArrayBuffer(arrayBuffer)\n  const headers = getExcelHeaders(rows)\n  const rowCount = rows.length - 1\n  const headersLower = headers.map((h) => h.toLowerCase())\n\n  // Find likely URL column\n  let urlColumnIndex = headersLower.findIndex(\n    (h) => h === 'url' || h === 'image' || h === 'images' || h === 'image_url'\n  )\n  if (urlColumnIndex === -1) {\n    for (let col = 0; col < headers.length && urlColumnIndex === -1; col++) {\n      for (let row = 1; row < Math.min(100, rows.length); row++) {\n        const cell = cellToString(rows[row][col]).trim()\n        if (cell && cell.startsWith('http')) {\n          urlColumnIndex = col\n          break\n        }\n      }\n    }\n  }\n  if (urlColumnIndex === -1) urlColumnIndex = 0\n\n  const sampleRows = getExcelSampleRows(rows, urlColumnIndex)\n  const estimatedImageCounts = headers.map((_, colIndex) =>\n    estimateExcelImageCount(rows, colIndex)\n  )\n\n  if (options.previewOnly) {\n    return {\n      headers,\n      sampleRows,\n      rowCount,\n      estimatedImageCounts,\n      urls: [],\n      validCount: 0,\n      invalidCount: 0,\n      totalCount: 0,\n    }\n  }\n\n  const columnIndex = findColumnIndex(headers, options.column)\n  if (columnIndex === -1) {\n    throw new Error('Column not found in Excel file')\n  }\n\n  const urls: ParsedUrlItem[] = []\n  for (let i = 1; i < rows.length; i++) {\n    const cellValue = cellToString(rows[i][columnIndex]).trim()\n    if (cellValue) {\n      for (const url of splitMultipleUrls(cellValue)) {\n        const validation = validator(url)\n        urls.push({\n          url,\n          path: extractPathFromUrl(url),\n          valid: validation.valid,\n          error: validation.error,\n        })\n      }\n    }\n  }\n\n  const validCount = urls.filter((u) => u.valid).length\n\n  return {\n    headers,\n    sampleRows,\n    rowCount,\n    estimatedImageCounts,\n    urls,\n    validCount,\n    invalidCount: urls.length - validCount,\n    totalCount: urls.length,\n  }\n}\n\n/**\n * Detect if a file is a spreadsheet type\n */\nexport function isSpreadsheetFile(file: File): boolean {\n  const ext = file.name.toLowerCase()\n  return (\n    ext.endsWith('.csv') ||\n    ext.endsWith('.xlsx') ||\n    ext.endsWith('.xls') ||\n    ext.endsWith('.txt') ||\n    file.type === 'text/csv' ||\n    file.type === 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' ||\n    file.type === 'application/vnd.ms-excel'\n  )\n}\n","import { useCallback, useState, useRef, useEffect } from 'react'\nimport clsx from 'clsx'\nimport {\n  isImageFile,\n  isHeifFile,\n  isVideoFile,\n  is3DModelFile,\n  isPdfFile,\n  canPreviewFile,\n  getFileCategory,\n  convertHeicWithFallback,\n  validateFileSize,\n  generateId,\n  getImageDimensions,\n  ACCEPTED_IMAGE_FORMATS,\n  ACCEPTED_ALL_FORMATS,\n} from '../utils/image-utils'\nimport { isSpreadsheetFile } from '../utils/csv-parser'\nimport type { SirvFile } from '../types'\n\nexport interface DropZoneProps {\n  onFiles: (files: SirvFile[]) => void\n  onSpreadsheet?: (file: File) => void\n  accept?: string[]\n  maxFiles?: number\n  maxFileSize?: number\n  disabled?: boolean\n  compact?: boolean\n  /** Enable clipboard paste support */\n  enablePaste?: boolean\n  /** Accept all asset types (images, videos, 3D, PDF) */\n  acceptAllAssets?: boolean\n  className?: string\n  labels?: {\n    dropzone?: string\n    dropzoneHint?: string\n    browse?: string\n    pasteHint?: string\n  }\n  children?: React.ReactNode\n}\n\nexport function DropZone({\n  onFiles,\n  onSpreadsheet,\n  accept = ['image/*'],\n  maxFiles = 50,\n  maxFileSize = 10 * 1024 * 1024,\n  disabled = false,\n  compact = false,\n  enablePaste = true,\n  acceptAllAssets = false,\n  className,\n  labels = {},\n  children,\n}: DropZoneProps) {\n  const [isDragOver, setIsDragOver] = useState(false)\n  const [isConverting, setIsConverting] = useState(false)\n  const [convertingCount, setConvertingCount] = useState(0)\n  const inputRef = useRef<HTMLInputElement>(null)\n  const containerRef = useRef<HTMLDivElement>(null)\n\n  // Check if a file is acceptable based on settings\n  const isAcceptableFile = useCallback((file: File): boolean => {\n    if (acceptAllAssets) {\n      return isImageFile(file) || isVideoFile(file) || is3DModelFile(file) || isPdfFile(file)\n    }\n    return isImageFile(file)\n  }, [acceptAllAssets])\n\n  const processFiles = useCallback(\n    async (fileList: FileList | File[]) => {\n      const files = Array.from(fileList).slice(0, maxFiles)\n\n      // Check for spreadsheet files\n      const spreadsheetFile = files.find(isSpreadsheetFile)\n      if (spreadsheetFile && onSpreadsheet) {\n        onSpreadsheet(spreadsheetFile)\n        return\n      }\n\n      // Filter to acceptable files\n      const acceptableFiles = files.filter(isAcceptableFile)\n      if (acceptableFiles.length === 0) return\n\n      // Separate image files that need processing from other files\n      const imageFiles = acceptableFiles.filter(f => isImageFile(f))\n      const otherFiles = acceptableFiles.filter(f => !isImageFile(f))\n\n      // Check for HEIF files that need conversion\n      const heifFiles = imageFiles.filter(isHeifFile)\n      const regularFiles = imageFiles.filter((f) => !isHeifFile(f))\n\n      setIsConverting(heifFiles.length > 0)\n      setConvertingCount(heifFiles.length)\n\n      const processedFiles: SirvFile[] = []\n\n      // Process regular files\n      for (const file of regularFiles) {\n        const sizeValidation = validateFileSize(file, maxFileSize)\n        if (!sizeValidation.valid) {\n          processedFiles.push({\n            id: generateId(),\n            file,\n            filename: file.name,\n            previewUrl: '',\n            status: 'error',\n            progress: 0,\n            error: sizeValidation.error,\n          })\n          continue\n        }\n\n        const dimensions = await getImageDimensions(file)\n        processedFiles.push({\n          id: generateId(),\n          file,\n          filename: file.name,\n          previewUrl: URL.createObjectURL(file),\n          dimensions: dimensions || undefined,\n          size: file.size,\n          status: 'pending',\n          progress: 0,\n        })\n      }\n\n      // Convert HEIF files\n      for (const file of heifFiles) {\n        try {\n          const converted = await convertHeicWithFallback(file)\n          const sizeValidation = validateFileSize(converted, maxFileSize)\n          if (!sizeValidation.valid) {\n            processedFiles.push({\n              id: generateId(),\n              file: converted,\n              filename: converted.name,\n              previewUrl: '',\n              status: 'error',\n              progress: 0,\n              error: sizeValidation.error,\n            })\n            continue\n          }\n\n          const dimensions = await getImageDimensions(converted)\n          processedFiles.push({\n            id: generateId(),\n            file: converted,\n            filename: converted.name,\n            previewUrl: URL.createObjectURL(converted),\n            dimensions: dimensions || undefined,\n            size: converted.size,\n            status: 'pending',\n            progress: 0,\n          })\n        } catch (err) {\n          processedFiles.push({\n            id: generateId(),\n            file,\n            filename: file.name,\n            previewUrl: '',\n            status: 'error',\n            progress: 0,\n            error: err instanceof Error ? err.message : 'Failed to convert HEIC file',\n          })\n        }\n        setConvertingCount((c) => c - 1)\n      }\n\n      // Process non-image files (videos, 3D, PDFs)\n      for (const file of otherFiles) {\n        const sizeValidation = validateFileSize(file, maxFileSize)\n        if (!sizeValidation.valid) {\n          processedFiles.push({\n            id: generateId(),\n            file,\n            filename: file.name,\n            previewUrl: '',\n            fileCategory: getFileCategory(file),\n            status: 'error',\n            progress: 0,\n            error: sizeValidation.error,\n          })\n          continue\n        }\n\n        processedFiles.push({\n          id: generateId(),\n          file,\n          filename: file.name,\n          previewUrl: '', // No preview for non-image files\n          fileCategory: getFileCategory(file),\n          size: file.size,\n          status: 'pending',\n          progress: 0,\n        })\n      }\n\n      setIsConverting(false)\n      setConvertingCount(0)\n\n      if (processedFiles.length > 0) {\n        onFiles(processedFiles)\n      }\n    },\n    [maxFiles, maxFileSize, onFiles, onSpreadsheet, isAcceptableFile]\n  )\n\n  // Clipboard paste handler\n  useEffect(() => {\n    if (!enablePaste || disabled) return\n\n    const handlePaste = async (e: ClipboardEvent) => {\n      const items = e.clipboardData?.items\n      if (!items) return\n\n      const files: File[] = []\n      for (let i = 0; i < items.length; i++) {\n        const item = items[i]\n        if (item.kind === 'file') {\n          const file = item.getAsFile()\n          if (file) {\n            // For pasted images without a proper filename\n            if (item.type.startsWith('image/') && !file.name.includes('.')) {\n              const timestamp = Date.now()\n              const ext = item.type.split('/')[1] || 'png'\n              const namedFile = new File([file], `pasted-image-${timestamp}.${ext}`, {\n                type: file.type,\n              })\n              files.push(namedFile)\n            } else {\n              files.push(file)\n            }\n          }\n        }\n      }\n\n      if (files.length > 0) {\n        e.preventDefault()\n        await processFiles(files)\n      }\n    }\n\n    document.addEventListener('paste', handlePaste)\n    return () => document.removeEventListener('paste', handlePaste)\n  }, [enablePaste, disabled, processFiles])\n\n  const handleDragOver = useCallback(\n    (e: React.DragEvent) => {\n      e.preventDefault()\n      e.stopPropagation()\n      if (!disabled) {\n        setIsDragOver(true)\n      }\n    },\n    [disabled]\n  )\n\n  const handleDragLeave = useCallback((e: React.DragEvent) => {\n    e.preventDefault()\n    e.stopPropagation()\n    setIsDragOver(false)\n  }, [])\n\n  const handleDrop = useCallback(\n    async (e: React.DragEvent) => {\n      e.preventDefault()\n      e.stopPropagation()\n      setIsDragOver(false)\n\n      if (disabled) return\n\n      const { files } = e.dataTransfer\n      if (files.length > 0) {\n        await processFiles(files)\n      }\n    },\n    [disabled, processFiles]\n  )\n\n  const handleChange = useCallback(\n    async (e: React.ChangeEvent<HTMLInputElement>) => {\n      const { files } = e.target\n      if (files && files.length > 0) {\n        await processFiles(files)\n      }\n      // Reset input so same file can be selected again\n      e.target.value = ''\n    },\n    [processFiles]\n  )\n\n  const handleClick = useCallback(() => {\n    if (!disabled) {\n      inputRef.current?.click()\n    }\n  }, [disabled])\n\n  const handleKeyDown = useCallback(\n    (e: React.KeyboardEvent) => {\n      if ((e.key === 'Enter' || e.key === ' ') && !disabled) {\n        e.preventDefault()\n        inputRef.current?.click()\n      }\n    },\n    [disabled]\n  )\n\n  const acceptString = acceptAllAssets\n    ? ACCEPTED_ALL_FORMATS\n    : (accept.join(',') || ACCEPTED_IMAGE_FORMATS)\n\n  return (\n    <div\n      ref={containerRef}\n      className={clsx(\n        'sirv-dropzone',\n        isDragOver && 'sirv-dropzone--drag-over',\n        disabled && 'sirv-dropzone--disabled',\n        compact && 'sirv-dropzone--compact',\n        isConverting && 'sirv-dropzone--converting',\n        enablePaste && 'sirv-dropzone--paste-enabled',\n        className\n      )}\n      onDragOver={handleDragOver}\n      onDragLeave={handleDragLeave}\n      onDrop={handleDrop}\n      onClick={handleClick}\n      onKeyDown={handleKeyDown}\n      role=\"button\"\n      tabIndex={disabled ? -1 : 0}\n      aria-disabled={disabled}\n      aria-label={labels.dropzone || 'Drop files here or click to browse'}\n    >\n      <input\n        ref={inputRef}\n        type=\"file\"\n        accept={acceptString}\n        multiple={maxFiles > 1}\n        onChange={handleChange}\n        disabled={disabled}\n        className=\"sirv-dropzone__input\"\n        aria-hidden=\"true\"\n      />\n\n      {children || (\n        <div className=\"sirv-dropzone__content\">\n          {isConverting ? (\n            <>\n              <div className=\"sirv-dropzone__spinner\" />\n              <p className=\"sirv-dropzone__text\">\n                Converting {convertingCount} HEIC file{convertingCount !== 1 ? 's' : ''}...\n              </p>\n            </>\n          ) : (\n            <>\n              <svg\n                className=\"sirv-dropzone__icon\"\n                viewBox=\"0 0 24 24\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                strokeWidth=\"2\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n              >\n                <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\" />\n                <polyline points=\"17 8 12 3 7 8\" />\n                <line x1=\"12\" y1=\"3\" x2=\"12\" y2=\"15\" />\n              </svg>\n              <p className=\"sirv-dropzone__text\">\n                {labels.dropzone || 'Drop files here or click to browse'}\n              </p>\n              {!compact && (\n                <>\n                  <p className=\"sirv-dropzone__hint\">\n                    {labels.dropzoneHint || (acceptAllAssets\n                      ? 'Supports images, videos, 3D models, and PDFs'\n                      : 'Supports JPG, PNG, WebP, GIF, HEIC up to 10MB'\n                    )}\n                  </p>\n                  {enablePaste && (\n                    <p className=\"sirv-dropzone__paste-hint\">\n                      {labels.pasteHint || 'You can also paste images from clipboard'}\n                    </p>\n                  )}\n                </>\n              )}\n            </>\n          )}\n        </div>\n      )}\n    </div>\n  )\n}\n","import clsx from 'clsx'\nimport { formatFileSize } from '../utils/image-utils'\nimport type { SirvFile } from '../types'\n\nexport interface FileListProps {\n  files: SirvFile[]\n  onRemove?: (id: string) => void\n  onRetry?: (id: string) => void\n  showThumbnails?: boolean\n  className?: string\n  labels?: {\n    retry?: string\n    remove?: string\n    uploading?: string\n    processing?: string\n    success?: string\n    error?: string\n  }\n}\n\nexport function FileList({\n  files,\n  onRemove,\n  onRetry,\n  showThumbnails = true,\n  className,\n  labels = {},\n}: FileListProps) {\n  if (files.length === 0) return null\n\n  return (\n    <div className={clsx('sirv-filelist', className)}>\n      {files.map((file) => (\n        <FileItem\n          key={file.id}\n          file={file}\n          onRemove={onRemove}\n          onRetry={onRetry}\n          showThumbnail={showThumbnails}\n          labels={labels}\n        />\n      ))}\n    </div>\n  )\n}\n\ninterface FileItemProps {\n  file: SirvFile\n  onRemove?: (id: string) => void\n  onRetry?: (id: string) => void\n  showThumbnail?: boolean\n  labels: FileListProps['labels']\n}\n\nfunction FileItem({ file, onRemove, onRetry, showThumbnail, labels = {} }: FileItemProps) {\n  const statusText = {\n    pending: '',\n    uploading: labels.uploading || 'Uploading...',\n    processing: labels.processing || 'Processing...',\n    success: labels.success || 'Uploaded',\n    error: labels.error || 'Failed',\n    conflict: 'Conflict',\n  }\n\n  return (\n    <div\n      className={clsx(\n        'sirv-filelist__item',\n        `sirv-filelist__item--${file.status}`,\n        file.error && 'sirv-filelist__item--has-error'\n      )}\n    >\n      {showThumbnail && file.previewUrl && (\n        <div className=\"sirv-filelist__thumbnail\">\n          <img src={file.previewUrl} alt=\"\" />\n        </div>\n      )}\n\n      <div className=\"sirv-filelist__info\">\n        <div className=\"sirv-filelist__name\" title={file.filename}>\n          {file.filename}\n        </div>\n        <div className=\"sirv-filelist__meta\">\n          {file.size && <span className=\"sirv-filelist__size\">{formatFileSize(file.size)}</span>}\n          {file.dimensions && (\n            <span className=\"sirv-filelist__dimensions\">\n              {file.dimensions.width}  {file.dimensions.height}\n            </span>\n          )}\n          {file.status !== 'pending' && (\n            <span className={`sirv-filelist__status sirv-filelist__status--${file.status}`}>\n              {statusText[file.status]}\n            </span>\n          )}\n        </div>\n        {file.error && <div className=\"sirv-filelist__error\">{file.error}</div>}\n      </div>\n\n      {/* Progress bar */}\n      {(file.status === 'uploading' || file.status === 'processing') && (\n        <div className=\"sirv-filelist__progress\">\n          <div\n            className=\"sirv-filelist__progress-bar\"\n            style={{ width: `${file.progress}%` }}\n          />\n        </div>\n      )}\n\n      {/* Actions */}\n      <div className=\"sirv-filelist__actions\">\n        {file.status === 'error' && onRetry && (\n          <button\n            type=\"button\"\n            className=\"sirv-filelist__action sirv-filelist__action--retry\"\n            onClick={() => onRetry(file.id)}\n            aria-label={labels.retry || 'Retry upload'}\n            title={labels.retry || 'Retry'}\n          >\n            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <path d=\"M1 4v6h6\" />\n              <path d=\"M3.51 15a9 9 0 1 0 2.13-9.36L1 10\" />\n            </svg>\n          </button>\n        )}\n        {onRemove && file.status !== 'uploading' && (\n          <button\n            type=\"button\"\n            className=\"sirv-filelist__action sirv-filelist__action--remove\"\n            onClick={() => onRemove(file.id)}\n            aria-label={labels.remove || 'Remove file'}\n            title={labels.remove || 'Remove'}\n          >\n            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\n              <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\n            </svg>\n          </button>\n        )}\n        {file.status === 'success' && (\n          <span className=\"sirv-filelist__check\">\n            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <polyline points=\"20 6 9 17 4 12\" />\n            </svg>\n          </span>\n        )}\n      </div>\n    </div>\n  )\n}\n\nexport interface FileListSummaryProps {\n  files: SirvFile[]\n  className?: string\n}\n\nexport function FileListSummary({ files, className }: FileListSummaryProps) {\n  const pending = files.filter((f) => f.status === 'pending').length\n  const uploading = files.filter((f) => f.status === 'uploading' || f.status === 'processing').length\n  const success = files.filter((f) => f.status === 'success').length\n  const error = files.filter((f) => f.status === 'error').length\n\n  if (files.length === 0) return null\n\n  return (\n    <div className={clsx('sirv-filelist-summary', className)}>\n      <span className=\"sirv-filelist-summary__total\">{files.length} files</span>\n      {pending > 0 && <span className=\"sirv-filelist-summary__pending\">{pending} pending</span>}\n      {uploading > 0 && (\n        <span className=\"sirv-filelist-summary__uploading\">{uploading} uploading</span>\n      )}\n      {success > 0 && <span className=\"sirv-filelist-summary__success\">{success} uploaded</span>}\n      {error > 0 && <span className=\"sirv-filelist-summary__error\">{error} failed</span>}\n    </div>\n  )\n}\n","import { useState, useCallback, useRef, useEffect } from 'react'\n\nexport type AspectRatio = 'free' | '1:1' | '4:3' | '3:4' | '16:9' | '9:16'\n\nexport interface CropArea {\n  x: number // Percentage (0-1)\n  y: number // Percentage (0-1)\n  width: number // Percentage (0-1)\n  height: number // Percentage (0-1)\n}\n\nexport interface EditorState {\n  rotation: 0 | 90 | 180 | 270\n  flipH: boolean\n  flipV: boolean\n  crop: CropArea | null\n  zoom: number\n}\n\nexport interface UseImageEditorOptions {\n  file: File\n  previewUrl: string\n  onApply: (editedFile: File, previewUrl: string) => void\n  onCancel: () => void\n  maxCanvasSize?: number\n}\n\nexport interface UseImageEditorReturn {\n  canvasRef: React.RefObject<HTMLCanvasElement | null>\n  state: EditorState\n  isLoading: boolean\n  imageLoaded: boolean\n  canvasSize: { width: number; height: number }\n  imageSize: { width: number; height: number }\n  hasChanges: boolean\n  isApplying: boolean\n  aspectRatio: AspectRatio\n\n  // Actions\n  rotateLeft: () => void\n  rotateRight: () => void\n  flipHorizontal: () => void\n  flipVertical: () => void\n  setCrop: (crop: CropArea | null) => void\n  setAspectRatio: (ratio: AspectRatio) => void\n  setZoom: (zoom: number) => void\n  reset: () => void\n  apply: () => Promise<void>\n}\n\nconst DEFAULT_STATE: EditorState = {\n  rotation: 0,\n  flipH: false,\n  flipV: false,\n  crop: null,\n  zoom: 1,\n}\n\nconst MAX_CANVAS_SIZE = 800\n\nexport function useImageEditor({\n  file,\n  previewUrl,\n  onApply,\n  onCancel,\n  maxCanvasSize = MAX_CANVAS_SIZE,\n}: UseImageEditorOptions): UseImageEditorReturn {\n  const canvasRef = useRef<HTMLCanvasElement>(null)\n  const imageRef = useRef<HTMLImageElement | null>(null)\n\n  const [state, setState] = useState<EditorState>(DEFAULT_STATE)\n  const [isLoading, setIsLoading] = useState(true)\n  const [imageLoaded, setImageLoaded] = useState(false)\n  const [isApplying, setIsApplying] = useState(false)\n  const [aspectRatio, setAspectRatio] = useState<AspectRatio>('free')\n  const [imageSize, setImageSize] = useState({ width: 0, height: 0 })\n  const [canvasSize, setCanvasSize] = useState({ width: 0, height: 0 })\n\n  // Load image on mount\n  useEffect(() => {\n    const img = new Image()\n    img.crossOrigin = 'anonymous'\n    img.onload = () => {\n      imageRef.current = img\n      setImageSize({ width: img.naturalWidth, height: img.naturalHeight })\n\n      // Calculate canvas size (fit to max size while maintaining aspect ratio)\n      const scale = Math.min(\n        maxCanvasSize / img.naturalWidth,\n        maxCanvasSize / img.naturalHeight,\n        1\n      )\n      setCanvasSize({\n        width: Math.round(img.naturalWidth * scale),\n        height: Math.round(img.naturalHeight * scale),\n      })\n\n      setImageLoaded(true)\n      setIsLoading(false)\n    }\n    img.onerror = () => {\n      setIsLoading(false)\n      console.error('Failed to load image for editing')\n    }\n    img.src = previewUrl\n  }, [previewUrl, maxCanvasSize])\n\n  // Render canvas whenever state changes\n  useEffect(() => {\n    if (!imageLoaded || !canvasRef.current || !imageRef.current) return\n\n    const canvas = canvasRef.current\n    const ctx = canvas.getContext('2d')\n    if (!ctx) return\n\n    const img = imageRef.current\n\n    // Determine canvas dimensions based on rotation\n    const isRotated90or270 = state.rotation === 90 || state.rotation === 270\n    let canvasWidth = canvasSize.width\n    let canvasHeight = canvasSize.height\n\n    if (isRotated90or270) {\n      // Swap dimensions when rotated 90 or 270\n      const scale = Math.min(\n        maxCanvasSize / img.naturalHeight,\n        maxCanvasSize / img.naturalWidth,\n        1\n      )\n      canvasWidth = Math.round(img.naturalHeight * scale)\n      canvasHeight = Math.round(img.naturalWidth * scale)\n    }\n\n    canvas.width = canvasWidth\n    canvas.height = canvasHeight\n\n    ctx.clearRect(0, 0, canvas.width, canvas.height)\n    ctx.save()\n\n    // Move to center\n    ctx.translate(canvas.width / 2, canvas.height / 2)\n\n    // Apply rotation\n    ctx.rotate((state.rotation * Math.PI) / 180)\n\n    // Apply flips\n    ctx.scale(state.flipH ? -1 : 1, state.flipV ? -1 : 1)\n\n    // Draw image centered\n    const drawWidth = isRotated90or270 ? canvasHeight : canvasWidth\n    const drawHeight = isRotated90or270 ? canvasWidth : canvasHeight\n    ctx.drawImage(img, -drawWidth / 2, -drawHeight / 2, drawWidth, drawHeight)\n\n    ctx.restore()\n  }, [state, imageLoaded, canvasSize, maxCanvasSize])\n\n  const hasChanges =\n    state.rotation !== 0 ||\n    state.flipH ||\n    state.flipV ||\n    state.crop !== null ||\n    state.zoom !== 1\n\n  const rotateLeft = useCallback(() => {\n    setState((prev) => ({\n      ...prev,\n      rotation: ((prev.rotation - 90 + 360) % 360) as 0 | 90 | 180 | 270,\n    }))\n  }, [])\n\n  const rotateRight = useCallback(() => {\n    setState((prev) => ({\n      ...prev,\n      rotation: ((prev.rotation + 90) % 360) as 0 | 90 | 180 | 270,\n    }))\n  }, [])\n\n  const flipHorizontal = useCallback(() => {\n    setState((prev) => ({ ...prev, flipH: !prev.flipH }))\n  }, [])\n\n  const flipVertical = useCallback(() => {\n    setState((prev) => ({ ...prev, flipV: !prev.flipV }))\n  }, [])\n\n  const setCrop = useCallback((crop: CropArea | null) => {\n    setState((prev) => ({ ...prev, crop }))\n  }, [])\n\n  const setZoom = useCallback((zoom: number) => {\n    setState((prev) => ({ ...prev, zoom: Math.max(1, Math.min(5, zoom)) }))\n  }, [])\n\n  const reset = useCallback(() => {\n    setState(DEFAULT_STATE)\n    setAspectRatio('free')\n  }, [])\n\n  const apply = useCallback(async () => {\n    if (!imageRef.current) return\n\n    setIsApplying(true)\n\n    try {\n      const img = imageRef.current\n\n      // Create output canvas at original resolution (or cropped size)\n      const outputCanvas = document.createElement('canvas')\n      const outputCtx = outputCanvas.getContext('2d')\n      if (!outputCtx) throw new Error('Failed to get canvas context')\n\n      // Calculate output dimensions\n      const isRotated90or270 = state.rotation === 90 || state.rotation === 270\n      let outputWidth = isRotated90or270 ? img.naturalHeight : img.naturalWidth\n      let outputHeight = isRotated90or270 ? img.naturalWidth : img.naturalHeight\n\n      // Apply crop if set\n      let cropX = 0,\n        cropY = 0,\n        cropWidth = outputWidth,\n        cropHeight = outputHeight\n\n      if (state.crop) {\n        cropX = Math.round(state.crop.x * outputWidth)\n        cropY = Math.round(state.crop.y * outputHeight)\n        cropWidth = Math.round(state.crop.width * outputWidth)\n        cropHeight = Math.round(state.crop.height * outputHeight)\n        outputWidth = cropWidth\n        outputHeight = cropHeight\n      }\n\n      outputCanvas.width = outputWidth\n      outputCanvas.height = outputHeight\n\n      // First, create a temp canvas with transformations applied\n      const tempCanvas = document.createElement('canvas')\n      const tempCtx = tempCanvas.getContext('2d')\n      if (!tempCtx) throw new Error('Failed to get temp canvas context')\n\n      const tempWidth = isRotated90or270 ? img.naturalHeight : img.naturalWidth\n      const tempHeight = isRotated90or270 ? img.naturalWidth : img.naturalHeight\n      tempCanvas.width = tempWidth\n      tempCanvas.height = tempHeight\n\n      tempCtx.save()\n      tempCtx.translate(tempWidth / 2, tempHeight / 2)\n      tempCtx.rotate((state.rotation * Math.PI) / 180)\n      tempCtx.scale(state.flipH ? -1 : 1, state.flipV ? -1 : 1)\n\n      const drawWidth = isRotated90or270 ? tempHeight : tempWidth\n      const drawHeight = isRotated90or270 ? tempWidth : tempHeight\n      tempCtx.drawImage(img, -drawWidth / 2, -drawHeight / 2, drawWidth, drawHeight)\n      tempCtx.restore()\n\n      // Now crop from temp canvas to output canvas\n      if (state.crop) {\n        outputCtx.drawImage(\n          tempCanvas,\n          cropX,\n          cropY,\n          cropWidth,\n          cropHeight,\n          0,\n          0,\n          outputWidth,\n          outputHeight\n        )\n      } else {\n        outputCtx.drawImage(tempCanvas, 0, 0)\n      }\n\n      // Convert to blob\n      const blob = await new Promise<Blob>((resolve, reject) => {\n        outputCanvas.toBlob(\n          (blob) => {\n            if (blob) resolve(blob)\n            else reject(new Error('Failed to create blob'))\n          },\n          file.type || 'image/png',\n          0.92\n        )\n      })\n\n      // Create new File\n      const editedFile = new File([blob], file.name, {\n        type: file.type || 'image/png',\n        lastModified: Date.now(),\n      })\n\n      // Create preview URL\n      const editedPreviewUrl = URL.createObjectURL(blob)\n\n      onApply(editedFile, editedPreviewUrl)\n    } catch (error) {\n      console.error('Failed to apply edits:', error)\n    } finally {\n      setIsApplying(false)\n    }\n  }, [state, file, onApply])\n\n  return {\n    canvasRef,\n    state,\n    isLoading,\n    imageLoaded,\n    canvasSize,\n    imageSize,\n    hasChanges,\n    isApplying,\n    aspectRatio,\n    rotateLeft,\n    rotateRight,\n    flipHorizontal,\n    flipVertical,\n    setCrop,\n    setAspectRatio,\n    setZoom,\n    reset,\n    apply,\n  }\n}\n","/**\n * Shared icon components - extracted to avoid recreating on every render\n */\n\n// Tab icons\nexport const UploadIcon = () => (\n  <svg className=\"sirv-uploader__tab-icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\">\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5\" />\n  </svg>\n)\n\nexport const UrlIcon = () => (\n  <svg className=\"sirv-uploader__tab-icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\">\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244\" />\n  </svg>\n)\n\nexport const DropboxIcon = () => (\n  <svg className=\"sirv-uploader__tab-icon\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n    <path d=\"M6 2l6 3.75L6 9.5 0 5.75 6 2zm12 0l6 3.75-6 3.75-6-3.75L18 2zM0 13.25L6 9.5l6 3.75L6 17 0 13.25zm18-3.75l6 3.75L18 17l-6-3.75 6-3.75zM6 18.25l6-3.75 6 3.75L12 22l-6-3.75z\" />\n  </svg>\n)\n\nexport const GoogleDriveIcon = () => (\n  <svg className=\"sirv-uploader__tab-icon\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n    <path d=\"M7.71 3.5L1.15 15l3.43 5.93h13.68l3.44-5.93L15.14 3.5H7.71zm.79 1.5h5.95l5.14 9H8.08l-5.14-9h5.56z\" />\n  </svg>\n)\n\n// Editor icons\nexport const RotateLeftIcon = () => (\n  <svg className=\"sirv-editor__icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\">\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3\" />\n  </svg>\n)\n\nexport const RotateRightIcon = () => (\n  <svg className=\"sirv-editor__icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\">\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M15 15l6-6m0 0l-6-6m6 6H9a6 6 0 000 12h3\" />\n  </svg>\n)\n\nexport const FlipHorizontalIcon = () => (\n  <svg className=\"sirv-editor__icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\">\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M7.5 21L3 12l4.5-9M16.5 21l4.5-9-4.5-9M12 3v18\" />\n  </svg>\n)\n\nexport const FlipVerticalIcon = () => (\n  <svg className=\"sirv-editor__icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\">\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M3 7.5L12 3l9 4.5M3 16.5l9 4.5 9-4.5M3 12h18\" />\n  </svg>\n)\n\nexport const CropIcon = () => (\n  <svg className=\"sirv-editor__icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\">\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M7.5 3v3.75M7.5 15v6M21 7.5h-6M3 7.5h12.75a1.5 1.5 0 011.5 1.5v12.75M7.5 3H3v4.5M7.5 21H21v-4.5\" />\n  </svg>\n)\n\nexport const TransformIcon = () => (\n  <svg className=\"sirv-editor__icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\">\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.992 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99\" />\n  </svg>\n)\n\nexport const CloseIcon = () => (\n  <svg className=\"sirv-editor__icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\">\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M6 18L18 6M6 6l12 12\" />\n  </svg>\n)\n\nexport const SpinnerIcon = () => (\n  <svg className=\"sirv-editor__spinner\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n    <circle cx=\"12\" cy=\"12\" r=\"10\" strokeOpacity=\"0.25\" />\n    <path d=\"M12 2a10 10 0 0110 10\" strokeLinecap=\"round\" />\n  </svg>\n)\n\n// Staged grid icons\nexport const VideoIcon = () => (\n  <svg className=\"sirv-staged-grid__placeholder-icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\">\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"m15.75 10.5 4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25h-9A2.25 2.25 0 0 0 2.25 7.5v9a2.25 2.25 0 0 0 2.25 2.25Z\" />\n  </svg>\n)\n\nexport const Model3DIcon = () => (\n  <svg className=\"sirv-staged-grid__placeholder-icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\">\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9\" />\n  </svg>\n)\n\nexport const PdfIcon = () => (\n  <svg className=\"sirv-staged-grid__placeholder-icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\">\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z\" />\n  </svg>\n)\n\nexport const SpreadsheetIcon = () => (\n  <svg className=\"sirv-staged-grid__placeholder-icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\">\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125M3.375 19.5h7.5c.621 0 1.125-.504 1.125-1.125m-9.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-7.5A1.125 1.125 0 0 1 12 18.375m9.75-12.75c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125m19.5 0v1.5c0 .621-.504 1.125-1.125 1.125M2.25 5.625v1.5c0 .621.504 1.125 1.125 1.125m0 0h17.25m-17.25 0h7.5c.621 0 1.125.504 1.125 1.125M3.375 8.25c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m17.25-3.75h-7.5c-.621 0-1.125.504-1.125 1.125m8.625-1.125c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M12 10.875v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125M10.875 12h2.25m-2.25 0c-.621 0-1.125.504-1.125 1.125M13.125 12c.621 0 1.125.504 1.125 1.125m-2.25 0v1.5m0-1.5c0 .621-.504 1.125-1.125 1.125m2.25-1.125c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m-2.25-1.125c-.621 0-1.125.504-1.125 1.125m0 0v1.5c0 .621.504 1.125 1.125 1.125m-1.125-2.625c0 .621.504 1.125 1.125 1.125M12 15.375h2.25m-2.25 0h-2.25\" />\n  </svg>\n)\n\nexport const PresentationIcon = () => (\n  <svg className=\"sirv-staged-grid__placeholder-icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\">\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M3.75 3v11.25A2.25 2.25 0 0 0 6 16.5h12a2.25 2.25 0 0 0 2.25-2.25V3M3.75 3h16.5M3.75 3H2.25m17.25 0H21m-9 15.75v-4.5m0 4.5-3-3m3 3 3-3\" />\n  </svg>\n)\n\nexport const DocumentIcon = () => (\n  <svg className=\"sirv-staged-grid__placeholder-icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\">\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 11.625h7.5m-7.5 3H12m-5.25 3h10.5a2.25 2.25 0 0 0 2.25-2.25V6.375a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v13.5a2.25 2.25 0 0 0 2.25 2.25Z\" />\n  </svg>\n)\n\nexport const FileIcon = () => (\n  <svg className=\"sirv-staged-grid__placeholder-icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\">\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z\" />\n  </svg>\n)\n\nexport const EditIcon = () => (\n  <svg className=\"sirv-staged-grid__action-icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\">\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10\" />\n  </svg>\n)\n\nexport const RemoveIcon = () => (\n  <svg className=\"sirv-staged-grid__action-icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\">\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M6 18L18 6M6 6l12 12\" />\n  </svg>\n)\n\nexport const PlusIcon = () => (\n  <svg className=\"sirv-staged-grid__add-icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\">\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M12 4.5v15m7.5-7.5h-15\" />\n  </svg>\n)\n\nexport const CheckIcon = () => (\n  <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n    <polyline points=\"20 6 9 17 4 12\" />\n  </svg>\n)\n","import { useState, useCallback, useRef, useEffect, memo, useMemo } from 'react'\nimport clsx from 'clsx'\nimport { useImageEditor, type AspectRatio, type CropArea } from '../hooks/useImageEditor'\nimport {\n  RotateLeftIcon,\n  RotateRightIcon,\n  FlipHorizontalIcon,\n  FlipVerticalIcon,\n  CropIcon,\n  TransformIcon,\n  CloseIcon,\n  SpinnerIcon,\n} from './icons'\n\nexport interface ImageEditorProps {\n  file: File\n  previewUrl: string\n  onApply: (editedFile: File, previewUrl: string) => void\n  onCancel: () => void\n  labels?: {\n    title?: string\n    apply?: string\n    cancel?: string\n    reset?: string\n    rotateLeft?: string\n    rotateRight?: string\n    flipHorizontal?: string\n    flipVertical?: string\n    crop?: string\n    transform?: string\n    aspectRatio?: string\n    aspectFree?: string\n  }\n}\n\ntype EditorMode = 'transform' | 'crop'\n\nconst ASPECT_RATIOS: { value: AspectRatio; label: string; ratio: number | null }[] = [\n  { value: 'free', label: 'Free', ratio: null },\n  { value: '1:1', label: '1:1', ratio: 1 },\n  { value: '4:3', label: '4:3', ratio: 4 / 3 },\n  { value: '3:4', label: '3:4', ratio: 3 / 4 },\n  { value: '16:9', label: '16:9', ratio: 16 / 9 },\n  { value: '9:16', label: '9:16', ratio: 9 / 16 },\n]\n\ninterface CropOverlayProps {\n  canvasWidth: number\n  canvasHeight: number\n  crop: CropArea | null\n  onCropChange: (crop: CropArea | null) => void\n  aspectRatio: AspectRatio\n  disabled?: boolean\n}\n\nconst CropOverlay = memo(function CropOverlay({\n  canvasWidth,\n  canvasHeight,\n  crop,\n  onCropChange,\n  aspectRatio,\n  disabled,\n}: CropOverlayProps) {\n  const overlayRef = useRef<HTMLDivElement>(null)\n  const [isDragging, setIsDragging] = useState(false)\n  const [dragType, setDragType] = useState<'move' | 'resize' | null>(null)\n  const [dragStart, setDragStart] = useState({ x: 0, y: 0 })\n  const [initialCrop, setInitialCrop] = useState<CropArea | null>(null)\n  const [resizeHandle, setResizeHandle] = useState<string | null>(null)\n\n  // Initialize crop if not set\n  useEffect(() => {\n    if (!crop) {\n      const ratioConfig = ASPECT_RATIOS.find((r) => r.value === aspectRatio)\n      const ratio = ratioConfig?.ratio\n\n      let width = 0.8\n      let height = 0.8\n\n      if (ratio) {\n        const canvasRatio = canvasWidth / canvasHeight\n        if (ratio > canvasRatio) {\n          width = 0.8\n          height = (width * canvasWidth) / (ratio * canvasHeight)\n        } else {\n          height = 0.8\n          width = (height * canvasHeight * ratio) / canvasWidth\n        }\n      }\n\n      const x = (1 - width) / 2\n      const y = (1 - height) / 2\n\n      onCropChange({ x, y, width, height })\n    }\n  }, [crop, aspectRatio, canvasWidth, canvasHeight, onCropChange])\n\n  const getMousePosition = useCallback(\n    (e: React.MouseEvent | MouseEvent) => {\n      if (!overlayRef.current) return { x: 0, y: 0 }\n      const rect = overlayRef.current.getBoundingClientRect()\n      return {\n        x: (e.clientX - rect.left) / rect.width,\n        y: (e.clientY - rect.top) / rect.height,\n      }\n    },\n    []\n  )\n\n  const handleMouseDown = useCallback(\n    (e: React.MouseEvent, type: 'move' | 'resize', handle?: string) => {\n      if (disabled || !crop) return\n      e.preventDefault()\n      e.stopPropagation()\n      setIsDragging(true)\n      setDragType(type)\n      setDragStart(getMousePosition(e))\n      setInitialCrop({ ...crop })\n      if (handle) setResizeHandle(handle)\n    },\n    [disabled, crop, getMousePosition]\n  )\n\n  useEffect(() => {\n    if (!isDragging || !initialCrop) return\n\n    const handleMouseMove = (e: MouseEvent) => {\n      const pos = getMousePosition(e)\n      const dx = pos.x - dragStart.x\n      const dy = pos.y - dragStart.y\n\n      if (dragType === 'move') {\n        const newX = Math.max(0, Math.min(1 - initialCrop.width, initialCrop.x + dx))\n        const newY = Math.max(0, Math.min(1 - initialCrop.height, initialCrop.y + dy))\n        onCropChange({ ...initialCrop, x: newX, y: newY })\n      } else if (dragType === 'resize' && resizeHandle) {\n        let newCrop = { ...initialCrop }\n        const ratioConfig = ASPECT_RATIOS.find((r) => r.value === aspectRatio)\n        const ratio = ratioConfig?.ratio\n\n        // Handle resize based on which handle was grabbed\n        if (resizeHandle.includes('e')) {\n          newCrop.width = Math.max(0.1, Math.min(1 - initialCrop.x, initialCrop.width + dx))\n        }\n        if (resizeHandle.includes('w')) {\n          const newWidth = Math.max(0.1, Math.min(initialCrop.x + initialCrop.width, initialCrop.width - dx))\n          const newX = initialCrop.x + initialCrop.width - newWidth\n          newCrop.x = Math.max(0, newX)\n          newCrop.width = newWidth\n        }\n        if (resizeHandle.includes('s')) {\n          newCrop.height = Math.max(0.1, Math.min(1 - initialCrop.y, initialCrop.height + dy))\n        }\n        if (resizeHandle.includes('n')) {\n          const newHeight = Math.max(0.1, Math.min(initialCrop.y + initialCrop.height, initialCrop.height - dy))\n          const newY = initialCrop.y + initialCrop.height - newHeight\n          newCrop.y = Math.max(0, newY)\n          newCrop.height = newHeight\n        }\n\n        // Enforce aspect ratio if set\n        if (ratio) {\n          const cropWidthPx = newCrop.width * canvasWidth\n          const cropHeightPx = newCrop.height * canvasHeight\n          const currentRatio = cropWidthPx / cropHeightPx\n\n          if (currentRatio > ratio) {\n            // Too wide, adjust width\n            newCrop.width = (newCrop.height * canvasHeight * ratio) / canvasWidth\n          } else {\n            // Too tall, adjust height\n            newCrop.height = (newCrop.width * canvasWidth) / (ratio * canvasHeight)\n          }\n\n          // Keep within bounds\n          if (newCrop.x + newCrop.width > 1) {\n            newCrop.x = 1 - newCrop.width\n          }\n          if (newCrop.y + newCrop.height > 1) {\n            newCrop.y = 1 - newCrop.height\n          }\n        }\n\n        onCropChange(newCrop)\n      }\n    }\n\n    const handleMouseUp = () => {\n      setIsDragging(false)\n      setDragType(null)\n      setResizeHandle(null)\n    }\n\n    window.addEventListener('mousemove', handleMouseMove)\n    window.addEventListener('mouseup', handleMouseUp)\n\n    return () => {\n      window.removeEventListener('mousemove', handleMouseMove)\n      window.removeEventListener('mouseup', handleMouseUp)\n    }\n  }, [isDragging, dragType, dragStart, initialCrop, resizeHandle, aspectRatio, canvasWidth, canvasHeight, getMousePosition, onCropChange])\n\n  if (!crop) return null\n\n  const style = {\n    left: `${crop.x * 100}%`,\n    top: `${crop.y * 100}%`,\n    width: `${crop.width * 100}%`,\n    height: `${crop.height * 100}%`,\n  }\n\n  return (\n    <div ref={overlayRef} className=\"sirv-editor__crop-overlay\">\n      {/* Darkened areas */}\n      <div className=\"sirv-editor__crop-mask\" />\n\n      {/* Crop box */}\n      <div\n        className={clsx('sirv-editor__crop-box', isDragging && 'sirv-editor__crop-box--dragging')}\n        style={style}\n        onMouseDown={(e) => handleMouseDown(e, 'move')}\n      >\n        {/* Grid lines */}\n        <div className=\"sirv-editor__crop-grid\">\n          <div className=\"sirv-editor__crop-grid-line sirv-editor__crop-grid-line--h1\" />\n          <div className=\"sirv-editor__crop-grid-line sirv-editor__crop-grid-line--h2\" />\n          <div className=\"sirv-editor__crop-grid-line sirv-editor__crop-grid-line--v1\" />\n          <div className=\"sirv-editor__crop-grid-line sirv-editor__crop-grid-line--v2\" />\n        </div>\n\n        {/* Resize handles */}\n        <div className=\"sirv-editor__crop-handle sirv-editor__crop-handle--n\" onMouseDown={(e) => handleMouseDown(e, 'resize', 'n')} />\n        <div className=\"sirv-editor__crop-handle sirv-editor__crop-handle--s\" onMouseDown={(e) => handleMouseDown(e, 'resize', 's')} />\n        <div className=\"sirv-editor__crop-handle sirv-editor__crop-handle--e\" onMouseDown={(e) => handleMouseDown(e, 'resize', 'e')} />\n        <div className=\"sirv-editor__crop-handle sirv-editor__crop-handle--w\" onMouseDown={(e) => handleMouseDown(e, 'resize', 'w')} />\n        <div className=\"sirv-editor__crop-handle sirv-editor__crop-handle--ne\" onMouseDown={(e) => handleMouseDown(e, 'resize', 'ne')} />\n        <div className=\"sirv-editor__crop-handle sirv-editor__crop-handle--nw\" onMouseDown={(e) => handleMouseDown(e, 'resize', 'nw')} />\n        <div className=\"sirv-editor__crop-handle sirv-editor__crop-handle--se\" onMouseDown={(e) => handleMouseDown(e, 'resize', 'se')} />\n        <div className=\"sirv-editor__crop-handle sirv-editor__crop-handle--sw\" onMouseDown={(e) => handleMouseDown(e, 'resize', 'sw')} />\n      </div>\n    </div>\n  )\n})\n\n// Default labels extracted to avoid object recreation\nconst DEFAULT_EDITOR_LABELS = {\n  title: 'Edit Image',\n  apply: 'Apply',\n  cancel: 'Cancel',\n  reset: 'Reset',\n  rotateLeft: 'Rotate Left',\n  rotateRight: 'Rotate Right',\n  flipHorizontal: 'Flip Horizontal',\n  flipVertical: 'Flip Vertical',\n  crop: 'Crop',\n  transform: 'Transform',\n  aspectRatio: 'Aspect Ratio',\n  aspectFree: 'Free',\n}\n\nexport function ImageEditor({\n  file,\n  previewUrl,\n  onApply,\n  onCancel,\n  labels = {},\n}: ImageEditorProps) {\n  const [mode, setMode] = useState<EditorMode>('transform')\n\n  const editor = useImageEditor({\n    file,\n    previewUrl,\n    onApply,\n    onCancel,\n  })\n\n  // Memoize merged labels to prevent child re-renders\n  const l = useMemo(() => ({ ...DEFAULT_EDITOR_LABELS, ...labels }), [labels])\n\n  const handleModeChange = useCallback(\n    (newMode: EditorMode) => {\n      if (newMode === 'crop' && !editor.state.crop) {\n        // Initialize crop when entering crop mode\n        editor.setCrop({ x: 0.1, y: 0.1, width: 0.8, height: 0.8 })\n      }\n      if (mode === 'crop' && newMode !== 'crop') {\n        // Clear crop when leaving crop mode\n        editor.setCrop(null)\n      }\n      setMode(newMode)\n    },\n    [editor, mode]\n  )\n\n  const handleClearCrop = useCallback(() => {\n    editor.setCrop(null)\n  }, [editor])\n\n  const isProcessing = editor.isLoading || editor.isApplying\n\n  return (\n    <div className=\"sirv-editor-overlay\" onClick={onCancel}>\n      <div className=\"sirv-editor\" onClick={(e) => e.stopPropagation()}>\n        {/* Header */}\n        <div className=\"sirv-editor__header\">\n          <h2 className=\"sirv-editor__title\">{l.title}</h2>\n          <div className=\"sirv-editor__header-actions\">\n            <button\n              type=\"button\"\n              className=\"sirv-editor__header-btn\"\n              onClick={editor.reset}\n              disabled={!editor.hasChanges}\n            >\n              {l.reset}\n            </button>\n            <button\n              type=\"button\"\n              className=\"sirv-editor__close\"\n              onClick={onCancel}\n            >\n              <CloseIcon />\n            </button>\n          </div>\n        </div>\n\n        {/* Mode tabs */}\n        <div className=\"sirv-editor__tabs\">\n          <button\n            type=\"button\"\n            className={clsx('sirv-editor__tab', mode === 'transform' && 'sirv-editor__tab--active')}\n            onClick={() => handleModeChange('transform')}\n            disabled={isProcessing}\n          >\n            <TransformIcon />\n            {l.transform}\n          </button>\n          <button\n            type=\"button\"\n            className={clsx('sirv-editor__tab', mode === 'crop' && 'sirv-editor__tab--active')}\n            onClick={() => handleModeChange('crop')}\n            disabled={isProcessing}\n          >\n            <CropIcon />\n            {l.crop}\n          </button>\n        </div>\n\n        {/* Canvas area */}\n        <div className=\"sirv-editor__canvas-area\">\n          {editor.isLoading ? (\n            <div className=\"sirv-editor__loading\">\n              <SpinnerIcon />\n              <span>Loading...</span>\n            </div>\n          ) : (\n            <div className=\"sirv-editor__canvas-wrapper\">\n              <canvas\n                ref={editor.canvasRef}\n                className=\"sirv-editor__canvas\"\n              />\n              {mode === 'crop' && editor.imageLoaded && (\n                <CropOverlay\n                  canvasWidth={editor.canvasSize.width}\n                  canvasHeight={editor.canvasSize.height}\n                  crop={editor.state.crop}\n                  onCropChange={editor.setCrop}\n                  aspectRatio={editor.aspectRatio}\n                  disabled={isProcessing}\n                />\n              )}\n            </div>\n          )}\n        </div>\n\n        {/* Controls */}\n        <div className=\"sirv-editor__controls\">\n          {mode === 'transform' && (\n            <div className=\"sirv-editor__transform-controls\">\n              <button\n                type=\"button\"\n                className=\"sirv-editor__control-btn\"\n                onClick={editor.rotateLeft}\n                disabled={isProcessing}\n                title={l.rotateLeft}\n              >\n                <RotateLeftIcon />\n              </button>\n              <button\n                type=\"button\"\n                className=\"sirv-editor__control-btn\"\n                onClick={editor.rotateRight}\n                disabled={isProcessing}\n                title={l.rotateRight}\n              >\n                <RotateRightIcon />\n              </button>\n              <div className=\"sirv-editor__control-divider\" />\n              <button\n                type=\"button\"\n                className={clsx('sirv-editor__control-btn', editor.state.flipH && 'sirv-editor__control-btn--active')}\n                onClick={editor.flipHorizontal}\n                disabled={isProcessing}\n                title={l.flipHorizontal}\n              >\n                <FlipHorizontalIcon />\n              </button>\n              <button\n                type=\"button\"\n                className={clsx('sirv-editor__control-btn', editor.state.flipV && 'sirv-editor__control-btn--active')}\n                onClick={editor.flipVertical}\n                disabled={isProcessing}\n                title={l.flipVertical}\n              >\n                <FlipVerticalIcon />\n              </button>\n            </div>\n          )}\n\n          {mode === 'crop' && (\n            <div className=\"sirv-editor__crop-controls\">\n              <label className=\"sirv-editor__control-label\">{l.aspectRatio}:</label>\n              <div className=\"sirv-editor__aspect-buttons\">\n                {ASPECT_RATIOS.map((ratio) => (\n                  <button\n                    key={ratio.value}\n                    type=\"button\"\n                    className={clsx(\n                      'sirv-editor__aspect-btn',\n                      editor.aspectRatio === ratio.value && 'sirv-editor__aspect-btn--active'\n                    )}\n                    onClick={() => {\n                      editor.setAspectRatio(ratio.value)\n                      // Reset crop when changing aspect ratio\n                      editor.setCrop(null)\n                    }}\n                    disabled={isProcessing}\n                  >\n                    {ratio.label}\n                  </button>\n                ))}\n              </div>\n              {editor.state.crop && (\n                <button\n                  type=\"button\"\n                  className=\"sirv-editor__clear-crop\"\n                  onClick={handleClearCrop}\n                  disabled={isProcessing}\n                >\n                  Clear\n                </button>\n              )}\n            </div>\n          )}\n        </div>\n\n        {/* Footer */}\n        <div className=\"sirv-editor__footer\">\n          <button\n            type=\"button\"\n            className=\"sirv-btn\"\n            onClick={onCancel}\n          >\n            {l.cancel}\n          </button>\n          <button\n            type=\"button\"\n            className=\"sirv-btn sirv-btn--primary\"\n            onClick={editor.apply}\n            disabled={isProcessing || !editor.hasChanges}\n          >\n            {editor.isApplying ? (\n              <>\n                <SpinnerIcon />\n                Applying...\n              </>\n            ) : (\n              l.apply\n            )}\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n}\n","import { useState, useCallback, useRef, memo, useMemo } from 'react'\nimport clsx from 'clsx'\nimport { formatFileSize, generateId, canPreviewFile, getFileCategory } from '../utils/image-utils'\nimport { ImageEditor } from './ImageEditor'\nimport {\n  VideoIcon,\n  Model3DIcon,\n  PdfIcon,\n  SpreadsheetIcon,\n  PresentationIcon,\n  DocumentIcon,\n  FileIcon,\n  EditIcon,\n  RemoveIcon,\n  PlusIcon,\n  CheckIcon,\n} from './icons'\nimport type { SirvFile, FileCategory } from '../types'\n\nexport interface StagedFilesGridProps {\n  files: SirvFile[]\n  onRemove: (id: string) => void\n  onEdit?: (file: SirvFile) => void\n  onFileEdited?: (id: string, editedFile: File, previewUrl: string) => void\n  onAddMore?: (files: SirvFile[]) => void\n  maxFiles?: number\n  accept?: string\n  disabled?: boolean\n  showFilenames?: boolean\n  enableEditor?: boolean\n  className?: string\n  labels?: {\n    addMore?: string\n    edit?: string\n    remove?: string\n  }\n}\n\n// File extension to icon mapping\nconst SPREADSHEET_EXTENSIONS = new Set(['xls', 'xlsx', 'csv', 'tsv', 'ods', 'numbers'])\nconst PRESENTATION_EXTENSIONS = new Set(['ppt', 'pptx', 'odp', 'key'])\nconst DOCUMENT_EXTENSIONS = new Set(['doc', 'docx', 'odt', 'rtf', 'txt', 'pages'])\n\nfunction getPlaceholderIcon(category?: FileCategory, filename?: string) {\n  if (filename) {\n    const ext = filename.toLowerCase().split('.').pop()\n    if (ext) {\n      if (SPREADSHEET_EXTENSIONS.has(ext)) return <SpreadsheetIcon />\n      if (PRESENTATION_EXTENSIONS.has(ext)) return <PresentationIcon />\n      if (DOCUMENT_EXTENSIONS.has(ext)) return <DocumentIcon />\n    }\n  }\n\n  switch (category) {\n    case 'video':\n      return <VideoIcon />\n    case '3d':\n      return <Model3DIcon />\n    case 'pdf':\n      return <PdfIcon />\n    default:\n      return <FileIcon />\n  }\n}\n\n// Memoized file item to prevent unnecessary re-renders\ninterface FileItemProps {\n  file: SirvFile\n  disabled: boolean\n  showFilenames: boolean\n  canEdit: boolean\n  onRemove: (id: string) => void\n  onEdit: (file: SirvFile) => void\n  labels: { edit?: string; remove?: string }\n}\n\nconst FileItem = memo(function FileItem({\n  file,\n  disabled,\n  showFilenames,\n  canEdit,\n  onRemove,\n  onEdit,\n  labels,\n}: FileItemProps) {\n  const hasPreview = !!file.previewUrl\n\n  const handleRemove = useCallback(() => {\n    onRemove(file.id)\n  }, [onRemove, file.id])\n\n  const handleEdit = useCallback(() => {\n    onEdit(file)\n  }, [onEdit, file])\n\n  return (\n    <div\n      className={clsx(\n        'sirv-staged-grid__item',\n        file.status === 'error' && 'sirv-staged-grid__item--error',\n        file.status === 'uploading' && 'sirv-staged-grid__item--uploading',\n        file.status === 'success' && 'sirv-staged-grid__item--success'\n      )}\n    >\n      <div className=\"sirv-staged-grid__preview\">\n        {hasPreview ? (\n          <img\n            src={file.previewUrl}\n            alt={file.filename}\n            className=\"sirv-staged-grid__image\"\n          />\n        ) : (\n          <div className=\"sirv-staged-grid__placeholder\">\n            {getPlaceholderIcon(file.fileCategory, file.filename)}\n          </div>\n        )}\n\n        {!disabled && (\n          <div className=\"sirv-staged-grid__overlay\">\n            {canEdit && (\n              <button\n                type=\"button\"\n                className=\"sirv-staged-grid__action sirv-staged-grid__action--edit\"\n                onClick={handleEdit}\n                title={labels.edit || 'Edit'}\n              >\n                <EditIcon />\n              </button>\n            )}\n            <button\n              type=\"button\"\n              className=\"sirv-staged-grid__action sirv-staged-grid__action--remove\"\n              onClick={handleRemove}\n              title={labels.remove || 'Remove'}\n            >\n              <RemoveIcon />\n            </button>\n          </div>\n        )}\n\n        {file.status === 'uploading' && (\n          <div className=\"sirv-staged-grid__progress\">\n            <div\n              className=\"sirv-staged-grid__progress-bar\"\n              style={{ width: `${file.progress}%` }}\n            />\n          </div>\n        )}\n\n        {file.status === 'success' && (\n          <div className=\"sirv-staged-grid__success-badge\">\n            <CheckIcon />\n          </div>\n        )}\n      </div>\n\n      {showFilenames && (\n        <div className=\"sirv-staged-grid__info\">\n          <span className=\"sirv-staged-grid__filename\" title={file.filename}>\n            {file.filename}\n          </span>\n          {file.size && (\n            <span className=\"sirv-staged-grid__size\">\n              {formatFileSize(file.size)}\n            </span>\n          )}\n        </div>\n      )}\n\n      {file.error && (\n        <div className=\"sirv-staged-grid__error\" title={file.error}>\n          {file.error}\n        </div>\n      )}\n    </div>\n  )\n})\n\nexport function StagedFilesGrid({\n  files,\n  onRemove,\n  onEdit,\n  onFileEdited,\n  onAddMore,\n  maxFiles = 50,\n  accept,\n  disabled = false,\n  showFilenames = true,\n  enableEditor = false,\n  className,\n  labels = {},\n}: StagedFilesGridProps) {\n  const inputRef = useRef<HTMLInputElement>(null)\n  const [editingFile, setEditingFile] = useState<SirvFile | null>(null)\n\n  const handleAddMoreClick = useCallback(() => {\n    if (!disabled) {\n      inputRef.current?.click()\n    }\n  }, [disabled])\n\n  const handleFileChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      if (!onAddMore || !e.target.files) return\n\n      const newFiles: SirvFile[] = Array.from(e.target.files).map((file) => ({\n        id: generateId(),\n        file,\n        filename: file.name,\n        previewUrl: canPreviewFile(file) ? URL.createObjectURL(file) : '',\n        size: file.size,\n        fileCategory: getFileCategory(file),\n        status: 'pending' as const,\n        progress: 0,\n      }))\n\n      onAddMore(newFiles)\n      e.target.value = ''\n    },\n    [onAddMore]\n  )\n\n  const handleEditClick = useCallback(\n    (file: SirvFile) => {\n      if (enableEditor && file.file && file.previewUrl) {\n        setEditingFile(file)\n      } else if (onEdit) {\n        onEdit(file)\n      }\n    },\n    [enableEditor, onEdit]\n  )\n\n  const handleEditorApply = useCallback(\n    (editedFile: File, previewUrl: string) => {\n      if (!editingFile) return\n\n      if (editingFile.previewUrl) {\n        URL.revokeObjectURL(editingFile.previewUrl)\n      }\n\n      if (onFileEdited) {\n        onFileEdited(editingFile.id, editedFile, previewUrl)\n      }\n\n      setEditingFile(null)\n    },\n    [editingFile, onFileEdited]\n  )\n\n  const handleEditorCancel = useCallback(() => {\n    setEditingFile(null)\n  }, [])\n\n  const canAddMore = files.length < maxFiles && onAddMore\n\n  // Memoize labels to prevent unnecessary re-renders of FileItem\n  const itemLabels = useMemo(() => ({ edit: labels.edit, remove: labels.remove }), [labels.edit, labels.remove])\n\n  return (\n    <div className={clsx('sirv-staged-grid', className)}>\n      <div className=\"sirv-staged-grid__items\">\n        {files.map((file) => (\n          <FileItem\n            key={file.id}\n            file={file}\n            disabled={disabled}\n            showFilenames={showFilenames}\n            canEdit={!!(onEdit || enableEditor) && !!file.file && !!file.previewUrl}\n            onRemove={onRemove}\n            onEdit={handleEditClick}\n            labels={itemLabels}\n          />\n        ))}\n\n        {canAddMore && (\n          <button\n            type=\"button\"\n            className=\"sirv-staged-grid__add-tile\"\n            onClick={handleAddMoreClick}\n            disabled={disabled}\n          >\n            <PlusIcon />\n            <span>{labels.addMore || 'Add more'}</span>\n            <input\n              ref={inputRef}\n              type=\"file\"\n              accept={accept}\n              multiple\n              onChange={handleFileChange}\n              className=\"sirv-staged-grid__input\"\n            />\n          </button>\n        )}\n      </div>\n\n      {editingFile && editingFile.file && editingFile.previewUrl && (\n        <ImageEditor\n          file={editingFile.file}\n          previewUrl={editingFile.previewUrl}\n          onApply={handleEditorApply}\n          onCancel={handleEditorCancel}\n        />\n      )}\n    </div>\n  )\n}\n","import { useState, useCallback, useRef } from 'react'\nimport clsx from 'clsx'\nimport {\n  parseCsvClient,\n  parseExcelClient,\n  isSpreadsheetFile,\n  type ClientParseResult,\n} from '../utils/csv-parser'\n\nexport interface SpreadsheetImportProps {\n  onUrls: (urls: string[]) => void\n  className?: string\n  labels?: {\n    drop?: string\n    hint?: string\n    validUrls?: string\n    invalidUrls?: string\n    import?: string\n    clear?: string\n  }\n}\n\nexport function SpreadsheetImport({\n  onUrls,\n  className,\n  labels = {},\n}: SpreadsheetImportProps) {\n  const [isDragOver, setIsDragOver] = useState(false)\n  const [isLoading, setIsLoading] = useState(false)\n  const [result, setResult] = useState<ClientParseResult | null>(null)\n  const [error, setError] = useState<string | null>(null)\n  const [selectedColumn, setSelectedColumn] = useState<string>('')\n  const inputRef = useRef<HTMLInputElement>(null)\n\n  const processFile = useCallback(async (file: File) => {\n    setIsLoading(true)\n    setError(null)\n    setResult(null)\n\n    try {\n      let parseResult: ClientParseResult\n\n      if (file.name.endsWith('.csv') || file.name.endsWith('.txt')) {\n        const text = await file.text()\n        parseResult = parseCsvClient(text, { previewOnly: true })\n      } else if (file.name.endsWith('.xlsx') || file.name.endsWith('.xls')) {\n        const buffer = await file.arrayBuffer()\n        parseResult = await parseExcelClient(buffer, { previewOnly: true })\n      } else {\n        throw new Error('Unsupported file type. Please use CSV, XLSX, or TXT.')\n      }\n\n      setResult(parseResult)\n\n      // Auto-select column with most URLs\n      const maxIndex = parseResult.estimatedImageCounts.indexOf(\n        Math.max(...parseResult.estimatedImageCounts)\n      )\n      if (maxIndex >= 0 && parseResult.headers[maxIndex]) {\n        setSelectedColumn(parseResult.headers[maxIndex])\n      }\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to parse file')\n    } finally {\n      setIsLoading(false)\n    }\n  }, [])\n\n  const handleDragOver = useCallback((e: React.DragEvent) => {\n    e.preventDefault()\n    setIsDragOver(true)\n  }, [])\n\n  const handleDragLeave = useCallback((e: React.DragEvent) => {\n    e.preventDefault()\n    setIsDragOver(false)\n  }, [])\n\n  const handleDrop = useCallback(\n    async (e: React.DragEvent) => {\n      e.preventDefault()\n      setIsDragOver(false)\n\n      const file = e.dataTransfer.files[0]\n      if (file && isSpreadsheetFile(file)) {\n        await processFile(file)\n      } else {\n        setError('Please drop a CSV or Excel file')\n      }\n    },\n    [processFile]\n  )\n\n  const handleChange = useCallback(\n    async (e: React.ChangeEvent<HTMLInputElement>) => {\n      const file = e.target.files?.[0]\n      if (file) {\n        await processFile(file)\n      }\n      e.target.value = ''\n    },\n    [processFile]\n  )\n\n  const handleImport = useCallback(async () => {\n    if (!result || !selectedColumn) return\n\n    setIsLoading(true)\n    try {\n      // Re-parse with URL extraction\n      // For now, use the URLs from the preview result\n      // In a real implementation, we'd re-parse with the selected column\n      const validUrls = result.urls.filter((u) => u.valid).map((u) => u.url)\n      onUrls(validUrls)\n      setResult(null)\n      setSelectedColumn('')\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to import URLs')\n    } finally {\n      setIsLoading(false)\n    }\n  }, [result, selectedColumn, onUrls])\n\n  const handleClear = useCallback(() => {\n    setResult(null)\n    setSelectedColumn('')\n    setError(null)\n  }, [])\n\n  return (\n    <div className={clsx('sirv-spreadsheet', className)}>\n      {!result ? (\n        <>\n          <div\n            className={clsx(\n              'sirv-spreadsheet__drop',\n              isDragOver && 'sirv-spreadsheet__drop--active'\n            )}\n            onDragOver={handleDragOver}\n            onDragLeave={handleDragLeave}\n            onDrop={handleDrop}\n            onClick={() => inputRef.current?.click()}\n            role=\"button\"\n            tabIndex={0}\n            onKeyDown={(e) => {\n              if (e.key === 'Enter' || e.key === ' ') {\n                inputRef.current?.click()\n              }\n            }}\n          >\n            <input\n              ref={inputRef}\n              type=\"file\"\n              accept=\".csv,.xlsx,.xls,.txt\"\n              onChange={handleChange}\n              style={{ display: 'none' }}\n            />\n\n            {isLoading ? (\n              <div className=\"sirv-dropzone__spinner\" />\n            ) : (\n              <>\n                <svg\n                  className=\"sirv-spreadsheet__icon\"\n                  viewBox=\"0 0 24 24\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  strokeWidth=\"2\"\n                >\n                  <path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\" />\n                  <polyline points=\"14 2 14 8 20 8\" />\n                  <line x1=\"16\" y1=\"13\" x2=\"8\" y2=\"13\" />\n                  <line x1=\"16\" y1=\"17\" x2=\"8\" y2=\"17\" />\n                  <polyline points=\"10 9 9 9 8 9\" />\n                </svg>\n                <p className=\"sirv-spreadsheet__text\">\n                  {labels.drop || 'Drop CSV or Excel file here'}\n                </p>\n                <p className=\"sirv-spreadsheet__hint\">\n                  {labels.hint || 'File should contain a column with image URLs'}\n                </p>\n              </>\n            )}\n          </div>\n\n          {error && (\n            <div className=\"sirv-filelist__error\" style={{ padding: '8px 16px' }}>\n              {error}\n            </div>\n          )}\n        </>\n      ) : (\n        <div className=\"sirv-spreadsheet__preview\">\n          {/* Column selector */}\n          <div style={{ marginBottom: '12px' }}>\n            <label style={{ display: 'block', marginBottom: '4px', fontWeight: 500 }}>\n              Select URL column:\n            </label>\n            <select\n              value={selectedColumn}\n              onChange={(e) => setSelectedColumn(e.target.value)}\n              style={{\n                width: '100%',\n                padding: '8px',\n                borderRadius: '4px',\n                border: '1px solid var(--sirv-border)',\n              }}\n            >\n              <option value=\"\">Select a column</option>\n              {result.headers.map((header, i) => (\n                <option key={i} value={header}>\n                  {header} ({result.estimatedImageCounts[i]} URLs)\n                </option>\n              ))}\n            </select>\n          </div>\n\n          {/* Preview table */}\n          <table className=\"sirv-spreadsheet__table\">\n            <thead>\n              <tr>\n                {result.headers.map((header, i) => (\n                  <th\n                    key={i}\n                    style={{\n                      background:\n                        header === selectedColumn\n                          ? 'var(--sirv-primary-light)'\n                          : undefined,\n                    }}\n                  >\n                    {header}\n                  </th>\n                ))}\n              </tr>\n            </thead>\n            <tbody>\n              {result.sampleRows.slice(0, 3).map((row, i) => (\n                <tr key={i}>\n                  {row.map((cell, j) => (\n                    <td\n                      key={j}\n                      style={{\n                        background:\n                          result.headers[j] === selectedColumn\n                            ? 'var(--sirv-primary-light)'\n                            : undefined,\n                        maxWidth: '200px',\n                        overflow: 'hidden',\n                        textOverflow: 'ellipsis',\n                        whiteSpace: 'nowrap',\n                      }}\n                    >\n                      {cell}\n                    </td>\n                  ))}\n                </tr>\n              ))}\n            </tbody>\n          </table>\n\n          {/* Stats */}\n          <div className=\"sirv-spreadsheet__stats\">\n            <span>Total rows: {result.rowCount}</span>\n            {selectedColumn && (\n              <>\n                <span className=\"sirv-spreadsheet__stat--valid\">\n                  {labels.validUrls || 'Valid URLs'}:{' '}\n                  {result.estimatedImageCounts[result.headers.indexOf(selectedColumn)] || 0}\n                </span>\n              </>\n            )}\n          </div>\n\n          {/* Actions */}\n          <div style={{ display: 'flex', gap: '8px', marginTop: '12px' }}>\n            <button type=\"button\" className=\"sirv-btn\" onClick={handleClear}>\n              {labels.clear || 'Clear'}\n            </button>\n            <button\n              type=\"button\"\n              className=\"sirv-btn sirv-btn--primary\"\n              onClick={handleImport}\n              disabled={!selectedColumn || isLoading}\n            >\n              {isLoading ? 'Adding images...' : `Add ${result.estimatedImageCounts[result.headers.indexOf(selectedColumn)] || 0} images`}\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n","import { useState, useCallback, useRef } from 'react'\nimport { generateId, getMimeType } from '../utils/image-utils'\nimport type {\n  SirvFile,\n  UploadStatus,\n  ConflictResolution,\n  UploadResponse,\n} from '../types'\n\nexport interface UseSirvUploadOptions {\n  /**\n   * Proxy endpoint URL for uploading files to Sirv.\n   * Your backend should forward the file to Sirv's REST API.\n   *\n   * The widget will POST to: {proxyEndpoint}/upload?filename=...&folder=...\n   * with the file binary in the request body.\n   *\n   * Expected response: { success: true, url: \"...\", path: \"...\" }\n   */\n  proxyEndpoint: string\n  /** Default upload folder */\n  folder: string\n  /** Conflict resolution strategy */\n  onConflict: ConflictResolution | 'ask'\n  /** Max concurrent uploads */\n  concurrency: number\n  /** Auto-upload on file add */\n  autoUpload: boolean\n  /** Max file size */\n  maxFileSize: number\n  /** Callback on successful uploads */\n  onUpload?: (files: SirvFile[]) => void\n  /** Callback on errors */\n  onError?: (error: string, file?: SirvFile) => void\n}\n\nexport interface UseSirvUploadReturn {\n  files: SirvFile[]\n  addFiles: (newFiles: SirvFile[]) => void\n  addUrls: (urls: string[]) => void\n  removeFile: (id: string) => void\n  clearFiles: () => void\n  uploadAll: () => Promise<void>\n  uploadFile: (id: string) => Promise<void>\n  retryFile: (id: string) => Promise<void>\n  cancelUpload: (id: string) => void\n  progress: number\n  isUploading: boolean\n  isComplete: boolean\n}\n\nexport function useSirvUpload(options: UseSirvUploadOptions): UseSirvUploadReturn {\n  const {\n    proxyEndpoint,\n    folder,\n    onConflict,\n    concurrency,\n    autoUpload,\n    onUpload,\n    onError,\n  } = options\n\n  const [files, setFiles] = useState<SirvFile[]>([])\n  const abortControllers = useRef<Map<string, AbortController>>(new Map())\n  const uploadQueue = useRef<string[]>([])\n  const activeUploads = useRef<number>(0)\n\n  // Update a file's state\n  const updateFile = useCallback((id: string, updates: Partial<SirvFile>) => {\n    setFiles((prev) =>\n      prev.map((f) => (f.id === id ? { ...f, ...updates } : f))\n    )\n  }, [])\n\n  // Upload file through proxy endpoint to Sirv REST API\n  const uploadWithProxy = useCallback(\n    async (file: SirvFile, signal: AbortSignal): Promise<void> => {\n      if (!proxyEndpoint) throw new Error('No proxy endpoint configured')\n      if (!file.file) throw new Error('No file data')\n\n      updateFile(file.id, { status: 'uploading', progress: 10 })\n\n      // Build upload URL with query params\n      // Handle both absolute URLs (https://...) and relative paths (/api/...)\n      const baseUrl = proxyEndpoint.startsWith('http')\n        ? proxyEndpoint\n        : `${typeof window !== 'undefined' ? window.location.origin : ''}${proxyEndpoint}`\n      const uploadUrl = new URL(`${baseUrl}/upload`)\n      uploadUrl.searchParams.set('filename', file.filename)\n      uploadUrl.searchParams.set('folder', folder)\n\n      updateFile(file.id, { progress: 30 })\n\n      // Upload file directly (binary)\n      const res = await fetch(uploadUrl.toString(), {\n        method: 'POST',\n        headers: { 'Content-Type': getMimeType(file.file) },\n        body: file.file,\n        signal,\n      })\n\n      updateFile(file.id, { progress: 80 })\n\n      if (!res.ok) {\n        const err = await res.json().catch(() => ({}))\n        throw new Error(err.error || `Upload failed: ${res.status}`)\n      }\n\n      const result: UploadResponse = await res.json()\n      if (!result.success) {\n        throw new Error(result.error || 'Upload failed')\n      }\n\n      updateFile(file.id, {\n        status: 'success',\n        progress: 100,\n        sirvUrl: result.url,\n        sirvPath: result.path,\n      })\n    },\n    [proxyEndpoint, folder, updateFile]\n  )\n\n  // Main upload function\n  const uploadFile = useCallback(\n    async (id: string): Promise<void> => {\n      const file = files.find((f) => f.id === id)\n      if (!file || file.status === 'uploading' || file.status === 'success') return\n\n      const controller = new AbortController()\n      abortControllers.current.set(id, controller)\n\n      try {\n        updateFile(id, { status: 'uploading', progress: 0, error: undefined })\n\n        await uploadWithProxy(file, controller.signal)\n\n        // Notify success\n        const updatedFile = files.find((f) => f.id === id)\n        if (updatedFile && onUpload) {\n          onUpload([{ ...updatedFile, status: 'success' }])\n        }\n      } catch (err) {\n        if (err instanceof Error && err.name === 'AbortError') {\n          updateFile(id, { status: 'pending', progress: 0 })\n          return\n        }\n\n        const errorMsg = err instanceof Error ? err.message : 'Upload failed'\n        updateFile(id, { status: 'error', progress: 0, error: errorMsg })\n        onError?.(errorMsg, file)\n      } finally {\n        abortControllers.current.delete(id)\n        activeUploads.current--\n        processQueue()\n      }\n    },\n    [files, proxyEndpoint, uploadWithProxy, updateFile, onUpload, onError]\n  )\n\n  // Process upload queue with concurrency limit\n  const processQueue = useCallback(() => {\n    while (activeUploads.current < concurrency && uploadQueue.current.length > 0) {\n      const id = uploadQueue.current.shift()\n      if (id) {\n        activeUploads.current++\n        uploadFile(id)\n      }\n    }\n  }, [concurrency, uploadFile])\n\n  // Upload all pending files\n  const uploadAll = useCallback(async (): Promise<void> => {\n    const pendingFiles = files.filter((f) => f.status === 'pending' || f.status === 'error')\n    uploadQueue.current = pendingFiles.map((f) => f.id)\n    processQueue()\n  }, [files, processQueue])\n\n  // Add files to the list\n  const addFiles = useCallback(\n    (newFiles: SirvFile[]) => {\n      setFiles((prev) => [...prev, ...newFiles])\n\n      if (autoUpload) {\n        // Queue new files for upload\n        uploadQueue.current.push(...newFiles.map((f) => f.id))\n        processQueue()\n      }\n    },\n    [autoUpload, processQueue]\n  )\n\n  // Add URLs (from CSV/spreadsheet)\n  const addUrls = useCallback(\n    (urls: string[]) => {\n      const newFiles: SirvFile[] = urls.map((url) => {\n        const filename = url.split('/').pop() || 'image.jpg'\n        return {\n          id: generateId(),\n          filename,\n          previewUrl: url,\n          sirvUrl: url,\n          status: 'success' as UploadStatus,\n          progress: 100,\n        }\n      })\n\n      setFiles((prev) => [...prev, ...newFiles])\n    },\n    []\n  )\n\n  // Remove a file\n  const removeFile = useCallback((id: string) => {\n    // Cancel if uploading\n    const controller = abortControllers.current.get(id)\n    if (controller) {\n      controller.abort()\n    }\n\n    // Remove from queue\n    uploadQueue.current = uploadQueue.current.filter((qid) => qid !== id)\n\n    // Remove from list\n    setFiles((prev) => prev.filter((f) => f.id !== id))\n  }, [])\n\n  // Clear all files\n  const clearFiles = useCallback(() => {\n    // Cancel all uploads\n    abortControllers.current.forEach((controller) => controller.abort())\n    abortControllers.current.clear()\n    uploadQueue.current = []\n    activeUploads.current = 0\n    setFiles([])\n  }, [])\n\n  // Retry a failed upload\n  const retryFile = useCallback(\n    async (id: string): Promise<void> => {\n      uploadQueue.current.push(id)\n      processQueue()\n    },\n    [processQueue]\n  )\n\n  // Cancel an upload\n  const cancelUpload = useCallback((id: string) => {\n    const controller = abortControllers.current.get(id)\n    if (controller) {\n      controller.abort()\n    }\n  }, [])\n\n  // Calculate overall progress\n  const progress = files.length > 0\n    ? Math.round(files.reduce((sum, f) => sum + f.progress, 0) / files.length)\n    : 0\n\n  const isUploading = files.some((f) => f.status === 'uploading' || f.status === 'processing')\n  const isComplete = files.length > 0 && files.every((f) => f.status === 'success')\n\n  return {\n    files,\n    addFiles,\n    addUrls,\n    removeFile,\n    clearFiles,\n    uploadAll,\n    uploadFile,\n    retryFile,\n    cancelUpload,\n    progress,\n    isUploading,\n    isComplete,\n  }\n}\n","import { useCallback, useEffect, useState } from 'react'\n\ndeclare global {\n  interface Window {\n    Dropbox?: {\n      choose: (options: DropboxChooserOptions) => void\n      isBrowserSupported: () => boolean\n    }\n  }\n}\n\ninterface DropboxChooserOptions {\n  success: (files: DropboxFile[]) => void\n  cancel?: () => void\n  linkType: 'preview' | 'direct'\n  multiselect: boolean\n  extensions?: string[]\n  folderselect?: boolean\n  sizeLimit?: number\n}\n\nexport interface DropboxFile {\n  id: string\n  name: string\n  link: string\n  bytes: number\n  icon: string\n  thumbnailLink?: string\n  isDir: boolean\n}\n\nexport interface UseDropboxChooserOptions {\n  /** Dropbox App Key - get from https://www.dropbox.com/developers/apps */\n  appKey: string\n  /** Callback when files are selected */\n  onSelect: (files: DropboxFile[]) => void\n  /** Callback when picker is cancelled */\n  onCancel?: () => void\n  /** Allow multiple file selection */\n  multiselect?: boolean\n  /** File extensions to filter by */\n  extensions?: string[]\n  /** Max file size in bytes */\n  maxSizeBytes?: number\n}\n\nconst DEFAULT_EXTENSIONS = [\n  '.jpg', '.jpeg', '.png', '.gif', '.webp', '.heic', '.heif', '.avif', '.bmp', '.tiff', '.tif',\n  '.mp4', '.webm', '.mov', '.avi',\n  '.glb', '.gltf', '.obj', '.fbx',\n  '.pdf',\n]\n\nexport function useDropboxChooser({\n  appKey,\n  onSelect,\n  onCancel,\n  multiselect = true,\n  extensions = DEFAULT_EXTENSIONS,\n  maxSizeBytes,\n}: UseDropboxChooserOptions) {\n  const [isLoading, setIsLoading] = useState(false)\n  const [isSupported, setIsSupported] = useState(false)\n  const [isReady, setIsReady] = useState(false)\n\n  useEffect(() => {\n    if (!appKey) return\n\n    const checkSupport = () => {\n      if (window.Dropbox) {\n        setIsSupported(window.Dropbox.isBrowserSupported())\n        setIsReady(true)\n      }\n    }\n\n    // Already loaded\n    if (window.Dropbox) {\n      requestAnimationFrame(checkSupport)\n      return\n    }\n\n    // Load the Dropbox script\n    const existingScript = document.getElementById('dropboxjs')\n    if (existingScript) {\n      checkSupport()\n      return\n    }\n\n    const script = document.createElement('script')\n    script.src = 'https://www.dropbox.com/static/api/2/dropins.js'\n    script.id = 'dropboxjs'\n    script.setAttribute('data-app-key', appKey)\n    script.async = true\n\n    script.onload = checkSupport\n\n    document.body.appendChild(script)\n\n    return () => {\n      // Don't remove the script on unmount as other instances might need it\n    }\n  }, [appKey])\n\n  const openChooser = useCallback(() => {\n    if (!window.Dropbox || !isSupported) {\n      console.warn('Dropbox Chooser not available')\n      return\n    }\n\n    setIsLoading(true)\n\n    window.Dropbox.choose({\n      success: (files) => {\n        setIsLoading(false)\n        onSelect(files)\n      },\n      cancel: () => {\n        setIsLoading(false)\n        onCancel?.()\n      },\n      linkType: 'direct',\n      multiselect,\n      extensions,\n      sizeLimit: maxSizeBytes,\n    })\n  }, [isSupported, onSelect, onCancel, multiselect, extensions, maxSizeBytes])\n\n  return {\n    /** Open the Dropbox file chooser */\n    openChooser,\n    /** Loading state */\n    isLoading,\n    /** Whether Dropbox is supported in this browser */\n    isSupported,\n    /** Whether the picker is configured and ready to use */\n    isConfigured: !!appKey,\n    /** Whether the SDK has finished loading */\n    isReady,\n  }\n}\n","import { useCallback, useState, useRef, useEffect } from 'react'\n\ndeclare global {\n  interface Window {\n    gapi?: {\n      load: (api: string, callback: () => void) => void\n      client?: {\n        init: (config: { apiKey?: string; discoveryDocs?: string[] }) => Promise<void>\n      }\n      auth2?: {\n        getAuthInstance: () => {\n          isSignedIn: { get: () => boolean }\n          signIn: (options?: { scope?: string }) => Promise<{ getAuthResponse: () => { access_token: string } }>\n          currentUser: { get: () => { getAuthResponse: () => { access_token: string } } }\n        }\n      }\n    }\n    google?: {\n      accounts: {\n        oauth2: {\n          initTokenClient: (config: {\n            client_id: string\n            scope: string\n            callback: (response: { access_token?: string; error?: string; expires_in?: number }) => void\n          }) => { requestAccessToken: () => void }\n        }\n      }\n      picker?: {\n        PickerBuilder: new () => GooglePickerBuilder\n        ViewId: { DOCS: string }\n        DocsView: new (viewId?: string) => GoogleDocsView\n        Action: { PICKED: string; CANCEL: string }\n        Feature: { MULTISELECT_ENABLED: number }\n      }\n    }\n  }\n}\n\ninterface GooglePickerBuilder {\n  addView: (view: GoogleDocsView) => GooglePickerBuilder\n  setOAuthToken: (token: string) => GooglePickerBuilder\n  setDeveloperKey: (key: string) => GooglePickerBuilder\n  setAppId: (appId: string) => GooglePickerBuilder\n  setCallback: (callback: (data: GooglePickerResponse) => void) => GooglePickerBuilder\n  enableFeature: (feature: number) => GooglePickerBuilder\n  setOrigin: (origin: string) => GooglePickerBuilder\n  build: () => { setVisible: (visible: boolean) => void }\n}\n\ninterface GoogleDocsView {\n  setMimeTypes: (types: string) => GoogleDocsView\n}\n\ninterface GooglePickerResponse {\n  action: string\n  docs?: GoogleDriveFile[]\n}\n\nexport interface GoogleDriveFile {\n  id: string\n  name: string\n  mimeType: string\n  sizeBytes?: number\n  url?: string\n  iconUrl?: string\n  thumbnails?: Array<{ url: string; width?: number; height?: number }>\n}\n\nexport interface UseGoogleDrivePickerOptions {\n  /** Google OAuth Client ID */\n  clientId: string\n  /** Google API Key (for Picker) */\n  apiKey: string\n  /** Google App ID */\n  appId: string\n  /** Callback when files are selected */\n  onSelect: (files: GoogleDriveFile[], accessToken: string) => void\n  /** Callback when picker is cancelled */\n  onCancel?: () => void\n  /** Allow multiple file selection */\n  multiselect?: boolean\n  /** MIME types to filter (comma-separated) */\n  mimeTypes?: string\n}\n\nconst SCOPE = 'https://www.googleapis.com/auth/drive.file'\nconst STORAGE_KEY = 'sirv_gdrive_picker_token'\nconst TOKEN_EXPIRY_KEY = 'sirv_gdrive_picker_token_expiry'\n\nconst DEFAULT_MIME_TYPES = [\n  'image/jpeg',\n  'image/png',\n  'image/gif',\n  'image/webp',\n  'image/svg+xml',\n  'image/bmp',\n  'image/tiff',\n  'image/heic',\n  'image/heif',\n  'image/avif',\n  'video/mp4',\n  'video/webm',\n  'video/quicktime',\n  'video/x-msvideo',\n  'video/mpeg',\n  'application/pdf',\n].join(',')\n\nfunction getStoredToken(): string | null {\n  if (typeof window === 'undefined') return null\n  try {\n    const token = localStorage.getItem(STORAGE_KEY)\n    const expiry = localStorage.getItem(TOKEN_EXPIRY_KEY)\n    if (token && expiry) {\n      const expiryTime = parseInt(expiry, 10)\n      // Return token if it's still valid (with 1 minute buffer)\n      if (Date.now() < expiryTime - 60000) {\n        return token\n      }\n      // Token expired, clear it\n      localStorage.removeItem(STORAGE_KEY)\n      localStorage.removeItem(TOKEN_EXPIRY_KEY)\n    }\n  } catch {\n    // localStorage not available\n  }\n  return null\n}\n\nfunction storeToken(token: string, expiresIn: number = 3600): void {\n  if (typeof window === 'undefined') return\n  try {\n    localStorage.setItem(STORAGE_KEY, token)\n    localStorage.setItem(TOKEN_EXPIRY_KEY, String(Date.now() + expiresIn * 1000))\n  } catch {\n    // localStorage not available\n  }\n}\n\nfunction clearStoredToken(): void {\n  if (typeof window === 'undefined') return\n  try {\n    localStorage.removeItem(STORAGE_KEY)\n    localStorage.removeItem(TOKEN_EXPIRY_KEY)\n  } catch {\n    // localStorage not available\n  }\n}\n\nexport function useGoogleDrivePicker({\n  clientId,\n  apiKey,\n  appId,\n  onSelect,\n  onCancel,\n  multiselect = true,\n  mimeTypes = DEFAULT_MIME_TYPES,\n}: UseGoogleDrivePickerOptions) {\n  const [isLoading, setIsLoading] = useState(false)\n  const [isReady, setIsReady] = useState(false)\n  const [hasSession, setHasSession] = useState(false)\n  const accessTokenRef = useRef<string | null>(null)\n  const pickerInitedRef = useRef(false)\n\n  const isConfigured = !!(clientId && apiKey && appId)\n\n  // Load stored token on mount\n  useEffect(() => {\n    const storedToken = getStoredToken()\n    if (storedToken) {\n      accessTokenRef.current = storedToken\n      setHasSession(true)\n    }\n  }, [])\n\n  // Clear stored session\n  const clearSession = useCallback(() => {\n    clearStoredToken()\n    accessTokenRef.current = null\n    setHasSession(false)\n  }, [])\n\n  const loadGoogleScripts = useCallback(async () => {\n    // Load GSI script (Google Identity Services)\n    if (!document.getElementById('google-gsi-script')) {\n      const gsiScript = document.createElement('script')\n      gsiScript.id = 'google-gsi-script'\n      gsiScript.src = 'https://accounts.google.com/gsi/client'\n      gsiScript.async = true\n      gsiScript.defer = true\n      document.body.appendChild(gsiScript)\n      await new Promise<void>((resolve) => {\n        gsiScript.onload = () => resolve()\n      })\n    }\n\n    // Load Picker API\n    if (!document.getElementById('google-picker-script')) {\n      const pickerScript = document.createElement('script')\n      pickerScript.id = 'google-picker-script'\n      pickerScript.src = 'https://apis.google.com/js/api.js'\n      pickerScript.async = true\n      pickerScript.defer = true\n      document.body.appendChild(pickerScript)\n      await new Promise<void>((resolve) => {\n        pickerScript.onload = () => resolve()\n      })\n    }\n\n    // Wait for gapi to be available and load picker\n    if (window.gapi && !pickerInitedRef.current) {\n      await new Promise<void>((resolve) => {\n        window.gapi!.load('picker', () => {\n          pickerInitedRef.current = true\n          resolve()\n        })\n      })\n    }\n\n    setIsReady(true)\n  }, [])\n\n  const getAccessToken = useCallback(async (): Promise<string | null> => {\n    // Try to use stored token first\n    if (accessTokenRef.current) {\n      return accessTokenRef.current\n    }\n\n    // Request new token via OAuth\n    return new Promise((resolve) => {\n      const tokenClient = window.google!.accounts.oauth2.initTokenClient({\n        client_id: clientId,\n        scope: SCOPE,\n        callback: (response) => {\n          if (response.access_token) {\n            const token = response.access_token\n            const expiresIn = response.expires_in || 3600\n            accessTokenRef.current = token\n            storeToken(token, expiresIn)\n            setHasSession(true)\n            resolve(token)\n          } else {\n            console.error('Google OAuth error:', response.error)\n            resolve(null)\n          }\n        },\n      })\n      tokenClient.requestAccessToken()\n    })\n  }, [clientId])\n\n  const showPicker = useCallback(\n    (accessToken: string) => {\n      if (!window.google?.picker) {\n        console.error('Google Picker API not loaded')\n        return\n      }\n\n      const view = new window.google.picker.DocsView(window.google.picker.ViewId.DOCS)\n      view.setMimeTypes(mimeTypes)\n\n      const picker = new window.google.picker.PickerBuilder()\n        .addView(view)\n        .setOAuthToken(accessToken)\n        .setDeveloperKey(apiKey)\n        .setAppId(appId)\n        .setOrigin(window.location.origin)\n        .setCallback((data: GooglePickerResponse) => {\n          if (data.action === window.google!.picker!.Action.PICKED) {\n            setIsLoading(false)\n            if (data.docs && accessTokenRef.current) {\n              onSelect(data.docs, accessTokenRef.current)\n            }\n          } else if (data.action === window.google!.picker!.Action.CANCEL) {\n            setIsLoading(false)\n            onCancel?.()\n          }\n        })\n\n      // Enable multiselect feature\n      if (multiselect && window.google.picker.Feature?.MULTISELECT_ENABLED) {\n        picker.enableFeature(window.google.picker.Feature.MULTISELECT_ENABLED)\n      } else if (multiselect) {\n        picker.enableFeature(1) // Fallback feature value\n      }\n\n      const pickerInstance = picker.build()\n      pickerInstance.setVisible(true)\n    },\n    [apiKey, appId, mimeTypes, multiselect, onSelect, onCancel]\n  )\n\n  const openPicker = useCallback(async () => {\n    if (!isConfigured) {\n      console.warn('Google Drive Picker not configured')\n      return\n    }\n\n    setIsLoading(true)\n\n    try {\n      await loadGoogleScripts()\n      const accessToken = await getAccessToken()\n      if (accessToken) {\n        showPicker(accessToken)\n      } else {\n        setIsLoading(false)\n      }\n    } catch (err) {\n      console.error('Failed to open Google Drive Picker:', err)\n      setIsLoading(false)\n    }\n  }, [isConfigured, loadGoogleScripts, getAccessToken, showPicker])\n\n  return {\n    /** Open the Google Drive picker */\n    openPicker,\n    /** Loading state */\n    isLoading,\n    /** Whether all APIs are loaded and ready */\n    isReady,\n    /** Whether the picker is configured */\n    isConfigured,\n    /** Whether we have a stored session */\n    hasSession,\n    /** Clear stored session to force re-authentication */\n    clearSession,\n  }\n}\n","import { useState, useCallback } from 'react'\nimport { generateId } from '../utils/image-utils'\nimport type { SirvFile } from '../types'\n\nexport interface ImportProgress {\n  current: number\n  total: number\n  source: string\n}\n\nexport interface ExternalFile {\n  url: string\n  name: string\n  accessToken?: string\n}\n\nexport interface UseExternalImportOptions {\n  maxFiles: number\n  onComplete: (files: SirvFile[]) => void\n}\n\nexport interface UseExternalImportReturn {\n  isImporting: boolean\n  progress: ImportProgress\n  importFiles: (files: ExternalFile[], source: string) => Promise<void>\n}\n\n/**\n * Shared hook for importing files from external sources (URLs, Dropbox, Google Drive)\n * Eliminates duplicated download-and-stage logic\n */\nexport function useExternalImport({\n  maxFiles,\n  onComplete,\n}: UseExternalImportOptions): UseExternalImportReturn {\n  const [isImporting, setIsImporting] = useState(false)\n  const [progress, setProgress] = useState<ImportProgress>({ current: 0, total: 0, source: '' })\n\n  const downloadFile = useCallback(async (\n    url: string,\n    filename: string,\n    accessToken?: string\n  ): Promise<SirvFile | null> => {\n    try {\n      const headers: HeadersInit = {}\n      if (accessToken) {\n        headers.Authorization = `Bearer ${accessToken}`\n      }\n      const response = await fetch(url, { headers })\n      if (!response.ok) throw new Error('Download failed')\n      const blob = await response.blob()\n      const file = new File([blob], filename, { type: blob.type || 'image/png' })\n      return {\n        id: generateId(),\n        file,\n        filename,\n        previewUrl: URL.createObjectURL(blob),\n        size: blob.size,\n        status: 'pending' as const,\n        progress: 0,\n      }\n    } catch (err) {\n      console.error(`Failed to download ${filename}:`, err)\n      return null\n    }\n  }, [])\n\n  const importFiles = useCallback(\n    async (files: ExternalFile[], source: string) => {\n      const filesToImport = files.slice(0, maxFiles)\n      if (filesToImport.length === 0) return\n\n      setIsImporting(true)\n      setProgress({ current: 0, total: filesToImport.length, source })\n\n      // Download files in parallel batches for better performance\n      const BATCH_SIZE = 3\n      const results: SirvFile[] = []\n\n      for (let i = 0; i < filesToImport.length; i += BATCH_SIZE) {\n        const batch = filesToImport.slice(i, i + BATCH_SIZE)\n        const batchPromises = batch.map((f) => downloadFile(f.url, f.name, f.accessToken))\n        const batchResults = await Promise.all(batchPromises)\n\n        for (const result of batchResults) {\n          if (result) results.push(result)\n        }\n\n        setProgress({ current: Math.min(i + BATCH_SIZE, filesToImport.length), total: filesToImport.length, source })\n      }\n\n      setIsImporting(false)\n      setProgress({ current: 0, total: 0, source: '' })\n\n      if (results.length > 0) {\n        onComplete(results)\n      }\n    },\n    [maxFiles, downloadFile, onComplete]\n  )\n\n  return {\n    isImporting,\n    progress,\n    importFiles,\n  }\n}\n","import { useState, useCallback, useMemo, memo } from 'react'\nimport clsx from 'clsx'\nimport { DropZone } from './DropZone'\nimport { FileList, FileListSummary } from './FileList'\nimport { StagedFilesGrid } from './StagedFilesGrid'\nimport { SpreadsheetImport } from './SpreadsheetImport'\nimport { UploadIcon, UrlIcon, DropboxIcon, GoogleDriveIcon } from './icons'\nimport { useSirvUpload } from '../hooks/useSirvUpload'\nimport { useDropboxChooser, type DropboxFile } from '../hooks/useDropboxChooser'\nimport { useGoogleDrivePicker, type GoogleDriveFile } from '../hooks/useGoogleDrivePicker'\nimport { useExternalImport } from '../hooks/useExternalImport'\nimport type { SirvUploaderProps, SirvFile } from '../types'\nimport { ACCEPTED_ALL_FORMATS } from '../utils/image-utils'\n\ntype TabMode = 'upload' | 'urls' | 'dropbox' | 'gdrive'\n\nconst DEFAULT_LABELS = {\n  dropzone: 'Drop files here or click to browse',\n  dropzoneHint: 'Supports JPG, PNG, WebP, GIF, HEIC up to 10MB',\n  pasteHint: 'You can also paste images from clipboard',\n  browse: 'Browse',\n  uploadFiles: 'Upload Files',\n  importUrls: 'Import URLs',\n  selectFromSirv: 'Select from Sirv',\n  importFromDropbox: 'Dropbox',\n  importFromGoogleDrive: 'Google Drive',\n  uploading: 'Uploading...',\n  processing: 'Processing...',\n  success: 'Uploaded',\n  error: 'Failed',\n  retry: 'Retry',\n  remove: 'Remove',\n  edit: 'Edit',\n  addMore: 'Add more',\n  clearAll: 'Clear all',\n  upload: 'Upload',\n  cancel: 'Cancel',\n  overwrite: 'Overwrite',\n  rename: 'Rename',\n  skip: 'Skip',\n  conflictTitle: 'File exists',\n  conflictMessage: 'A file with this name already exists.',\n  filesSelected: 'files selected',\n}\n\n// Memoized tab button to prevent unnecessary re-renders\ninterface TabButtonProps {\n  active: boolean\n  onClick: () => void\n  icon: React.ReactNode\n  label: string\n}\n\nconst TabButton = memo(function TabButton({ active, onClick, icon, label }: TabButtonProps) {\n  return (\n    <button\n      type=\"button\"\n      className={clsx('sirv-tabs__tab', active && 'sirv-tabs__tab--active')}\n      onClick={onClick}\n    >\n      {icon}\n      {label}\n    </button>\n  )\n})\n\n// Memoized external picker panel\ninterface ExternalPickerPanelProps {\n  icon: React.ReactNode\n  title: string\n  description: string\n  buttonLabel: string\n  onOpen: () => void\n  disabled: boolean\n  isLoading: boolean\n  variant: 'dropbox' | 'gdrive'\n}\n\nconst ExternalPickerPanel = memo(function ExternalPickerPanel({\n  icon,\n  title,\n  description,\n  buttonLabel,\n  onOpen,\n  disabled,\n  isLoading,\n  variant,\n}: ExternalPickerPanelProps) {\n  return (\n    <div className=\"sirv-uploader__external-picker\">\n      <div className={`sirv-uploader__external-icon sirv-uploader__external-icon--${variant}`}>\n        {icon}\n      </div>\n      <h3 className=\"sirv-uploader__external-title\">{title}</h3>\n      <p className=\"sirv-uploader__external-description\">{description}</p>\n      <button\n        type=\"button\"\n        className={`sirv-btn sirv-btn--primary sirv-btn--${variant}`}\n        onClick={onOpen}\n        disabled={disabled || isLoading}\n      >\n        {isLoading ? 'Loading...' : buttonLabel}\n      </button>\n    </div>\n  )\n})\n\nexport function SirvUploader({\n  proxyEndpoint,\n  folder = '/',\n  onUpload,\n  onError,\n  onSelect,\n  onRemove,\n  features = {},\n  dropbox,\n  googleDrive,\n  maxFiles = 50,\n  maxFileSize = 10 * 1024 * 1024,\n  accept = ['image/*'],\n  onConflict = 'rename',\n  autoUpload = true,\n  concurrency = 3,\n  className,\n  disabled = false,\n  compact = false,\n  theme = 'auto',\n  labels: customLabels = {},\n  children,\n}: SirvUploaderProps) {\n  // Memoize labels to prevent child re-renders\n  const labels = useMemo(() => ({ ...DEFAULT_LABELS, ...customLabels }), [customLabels])\n\n  const {\n    batch = true,\n    csvImport = true,\n    dragDrop = true,\n    paste = true,\n    allAssets = false,\n    imageEditor = true,\n  } = features\n\n  const [activeTab, setActiveTab] = useState<TabMode>('upload')\n  const [stagedFiles, setStagedFiles] = useState<SirvFile[]>([])\n\n  // Validate configuration (only warn once)\n  useMemo(() => {\n    if (!proxyEndpoint) {\n      console.warn('SirvUploader: proxyEndpoint is required')\n    }\n  }, [proxyEndpoint])\n\n  const upload = useSirvUpload({\n    proxyEndpoint,\n    folder,\n    onConflict,\n    concurrency,\n    autoUpload,\n    maxFileSize,\n    onUpload,\n    onError,\n  })\n\n  // Memoize computed values\n  const showStagedMode = !autoUpload && stagedFiles.length > 0\n  const hasFiles = showStagedMode ? stagedFiles.length > 0 : upload.files.length > 0\n  const hasPendingFiles = useMemo(() => {\n    const files = showStagedMode ? stagedFiles : upload.files\n    return files.some((f) => f.status === 'pending' || f.status === 'error')\n  }, [showStagedMode, stagedFiles, upload.files])\n\n  const acceptString = useMemo(\n    () => (allAssets ? ACCEPTED_ALL_FORMATS : accept.join(',')),\n    [allAssets, accept]\n  )\n\n  const themeClass = useMemo(\n    () => (theme === 'dark' ? 'sirv-uploader--dark' : theme === 'light' ? 'sirv-uploader--light' : undefined),\n    [theme]\n  )\n\n  // Handler for files from any source\n  const handleFiles = useCallback(\n    (files: SirvFile[]) => {\n      if (autoUpload) {\n        upload.addFiles(files)\n        onSelect?.(files)\n      } else {\n        setStagedFiles((prev) => {\n          const newFiles = files.filter((f) => !prev.some((p) => p.id === f.id))\n          return [...prev, ...newFiles].slice(0, maxFiles)\n        })\n        onSelect?.(files)\n      }\n    },\n    [upload, onSelect, autoUpload, maxFiles]\n  )\n\n  // External import hook (shared logic for URLs, Dropbox, Google Drive)\n  const externalImport = useExternalImport({\n    maxFiles,\n    onComplete: useCallback(\n      (files: SirvFile[]) => {\n        handleFiles(files)\n        setActiveTab('upload')\n      },\n      [handleFiles]\n    ),\n  })\n\n  // Handle spreadsheet file\n  const handleSpreadsheet = useCallback(() => {\n    setActiveTab('urls')\n  }, [])\n\n  // Handle URLs from spreadsheet\n  const handleUrls = useCallback(\n    async (urls: string[]) => {\n      await externalImport.importFiles(\n        urls.map((url) => ({\n          url,\n          name: url.split('/').pop()?.split('?')[0] || 'image.png',\n        })),\n        'URLs'\n      )\n    },\n    [externalImport]\n  )\n\n  // Handle file removal\n  const handleRemove = useCallback(\n    (id: string) => {\n      if (showStagedMode) {\n        setStagedFiles((prev) => prev.filter((f) => f.id !== id))\n      } else {\n        const file = upload.files.find((f) => f.id === id)\n        upload.removeFile(id)\n        if (file) onRemove?.(file)\n      }\n    },\n    [upload, onRemove, showStagedMode]\n  )\n\n  // Handle file edit (legacy callback)\n  const handleEdit = useCallback((file: SirvFile) => {\n    console.log('Edit file:', file.filename)\n  }, [])\n\n  // Handle file edited via built-in editor\n  const handleFileEdited = useCallback(\n    (id: string, editedFile: File, previewUrl: string) => {\n      setStagedFiles((prev) =>\n        prev.map((f) =>\n          f.id === id\n            ? { ...f, file: editedFile, filename: editedFile.name, previewUrl, size: editedFile.size }\n            : f\n        )\n      )\n    },\n    []\n  )\n\n  // Handle add more files in staged mode\n  const handleAddMore = useCallback(\n    (files: SirvFile[]) => {\n      setStagedFiles((prev) => [...prev, ...files].slice(0, maxFiles))\n    },\n    [maxFiles]\n  )\n\n  // Handle upload all staged files\n  const handleUploadAll = useCallback(() => {\n    upload.addFiles(stagedFiles)\n    setStagedFiles([])\n  }, [upload, stagedFiles])\n\n  // Handle clear all\n  const handleClearAll = useCallback(() => {\n    if (showStagedMode) {\n      setStagedFiles([])\n    } else {\n      upload.clearFiles()\n    }\n  }, [upload, showStagedMode])\n\n  // Dropbox integration\n  const dropboxChooser = useDropboxChooser({\n    appKey: dropbox?.appKey || '',\n    onSelect: useCallback(\n      async (files: DropboxFile[]) => {\n        await externalImport.importFiles(\n          files.map((f) => ({ url: f.link, name: f.name })),\n          'Dropbox'\n        )\n      },\n      [externalImport]\n    ),\n  })\n\n  // Google Drive integration\n  const googleDrivePicker = useGoogleDrivePicker({\n    clientId: googleDrive?.clientId || '',\n    apiKey: googleDrive?.apiKey || '',\n    appId: googleDrive?.appId || '',\n    onSelect: useCallback(\n      async (files: GoogleDriveFile[], accessToken: string) => {\n        await externalImport.importFiles(\n          files.map((f) => ({\n            url: `https://www.googleapis.com/drive/v3/files/${f.id}?alt=media`,\n            name: f.name,\n            accessToken,\n          })),\n          'Google Drive'\n        )\n      },\n      [externalImport]\n    ),\n  })\n\n  const hasDropbox = !!dropbox?.appKey && dropboxChooser.isConfigured\n  const hasGoogleDrive = !!googleDrive && googleDrivePicker.isConfigured\n  const showTabs = csvImport || hasDropbox || hasGoogleDrive\n\n  // Memoize label subsets for child components\n  const dropzoneLabels = useMemo(\n    () => ({\n      dropzone: labels.dropzone,\n      dropzoneHint: labels.dropzoneHint,\n      browse: labels.browse,\n      pasteHint: labels.pasteHint,\n    }),\n    [labels]\n  )\n\n  const stagedGridLabels = useMemo(\n    () => ({\n      addMore: labels.addMore,\n      edit: labels.edit,\n      remove: labels.remove,\n    }),\n    [labels]\n  )\n\n  const fileListLabels = useMemo(\n    () => ({\n      retry: labels.retry,\n      remove: labels.remove,\n      uploading: labels.uploading,\n      processing: labels.processing,\n      success: labels.success,\n      error: labels.error,\n    }),\n    [labels]\n  )\n\n  return (\n    <div className={clsx('sirv-uploader', themeClass, className)}>\n      {/* Tabs */}\n      {showTabs && (\n        <div className=\"sirv-tabs\">\n          <TabButton\n            active={activeTab === 'upload'}\n            onClick={() => setActiveTab('upload')}\n            icon={<UploadIcon />}\n            label={labels.uploadFiles}\n          />\n          {csvImport && (\n            <TabButton\n              active={activeTab === 'urls'}\n              onClick={() => setActiveTab('urls')}\n              icon={<UrlIcon />}\n              label={labels.importUrls}\n            />\n          )}\n          {hasDropbox && (\n            <TabButton\n              active={activeTab === 'dropbox'}\n              onClick={() => setActiveTab('dropbox')}\n              icon={<DropboxIcon />}\n              label={labels.importFromDropbox}\n            />\n          )}\n          {hasGoogleDrive && (\n            <TabButton\n              active={activeTab === 'gdrive'}\n              onClick={() => setActiveTab('gdrive')}\n              icon={<GoogleDriveIcon />}\n              label={labels.importFromGoogleDrive}\n            />\n          )}\n        </div>\n      )}\n\n      {/* Upload Tab */}\n      {activeTab === 'upload' && (\n        <>\n          {showStagedMode ? (\n            <StagedFilesGrid\n              files={stagedFiles}\n              onRemove={handleRemove}\n              onEdit={handleEdit}\n              onFileEdited={handleFileEdited}\n              onAddMore={handleAddMore}\n              maxFiles={maxFiles}\n              accept={acceptString}\n              disabled={disabled}\n              enableEditor={imageEditor}\n              labels={stagedGridLabels}\n            />\n          ) : (\n            <>\n              {dragDrop && (\n                <DropZone\n                  onFiles={handleFiles}\n                  onSpreadsheet={csvImport ? handleSpreadsheet : undefined}\n                  accept={accept}\n                  maxFiles={batch ? maxFiles : 1}\n                  maxFileSize={maxFileSize}\n                  disabled={disabled}\n                  compact={compact}\n                  enablePaste={paste}\n                  acceptAllAssets={allAssets}\n                  labels={dropzoneLabels}\n                >\n                  {children}\n                </DropZone>\n              )}\n\n              {hasFiles && autoUpload && (\n                <FileList\n                  files={upload.files}\n                  onRemove={handleRemove}\n                  onRetry={upload.retryFile}\n                  labels={fileListLabels}\n                />\n              )}\n            </>\n          )}\n        </>\n      )}\n\n      {/* URLs Tab */}\n      {activeTab === 'urls' && csvImport && (\n        <SpreadsheetImport onUrls={handleUrls} />\n      )}\n\n      {/* Import Progress Overlay */}\n      {externalImport.isImporting && (\n        <div className=\"sirv-uploader__import-progress\">\n          <div className=\"sirv-uploader__import-spinner\" />\n          <p className=\"sirv-uploader__import-text\">\n            Importing from {externalImport.progress.source}...\n          </p>\n          <p className=\"sirv-uploader__import-count\">\n            {externalImport.progress.current} / {externalImport.progress.total}\n          </p>\n        </div>\n      )}\n\n      {/* Dropbox Tab */}\n      {activeTab === 'dropbox' && hasDropbox && !externalImport.isImporting && (\n        <ExternalPickerPanel\n          icon={<DropboxIcon />}\n          title=\"Import from Dropbox\"\n          description=\"Select files from your Dropbox account\"\n          buttonLabel=\"Open Dropbox\"\n          onOpen={dropboxChooser.openChooser}\n          disabled={disabled}\n          isLoading={dropboxChooser.isLoading}\n          variant=\"dropbox\"\n        />\n      )}\n\n      {/* Google Drive Tab */}\n      {activeTab === 'gdrive' && hasGoogleDrive && !externalImport.isImporting && (\n        <ExternalPickerPanel\n          icon={<GoogleDriveIcon />}\n          title=\"Import from Google Drive\"\n          description=\"Select files from your Google Drive\"\n          buttonLabel=\"Open Google Drive\"\n          onOpen={googleDrivePicker.openPicker}\n          disabled={disabled}\n          isLoading={googleDrivePicker.isLoading}\n          variant=\"gdrive\"\n        />\n      )}\n\n      {/* Toolbar */}\n      {hasFiles && activeTab === 'upload' && (\n        <div className=\"sirv-uploader__toolbar\">\n          <div className=\"sirv-uploader__toolbar-left\" />\n\n          <div className=\"sirv-uploader__toolbar-right\">\n            <span className=\"sirv-uploader__file-count\">\n              {showStagedMode ? stagedFiles.length : upload.files.length} {labels.filesSelected}\n            </span>\n            <button\n              type=\"button\"\n              className=\"sirv-btn\"\n              onClick={handleClearAll}\n              disabled={disabled || upload.isUploading}\n            >\n              {labels.clearAll}\n            </button>\n            {showStagedMode && hasPendingFiles && (\n              <button\n                type=\"button\"\n                className=\"sirv-btn sirv-btn--primary\"\n                onClick={handleUploadAll}\n                disabled={disabled}\n              >\n                <UploadIcon />\n                {labels.upload}\n              </button>\n            )}\n            {!showStagedMode && hasPendingFiles && !autoUpload && (\n              <button\n                type=\"button\"\n                className=\"sirv-btn sirv-btn--primary\"\n                onClick={upload.uploadAll}\n                disabled={disabled || upload.isUploading}\n              >\n                {upload.isUploading ? labels.uploading : labels.upload}\n              </button>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Summary */}\n      {hasFiles && autoUpload && <FileListSummary files={upload.files} />}\n    </div>\n  )\n}\n"]}